/*
 Zoomify Image Viewer, version on line 26 below. Copyright Zoomify, Inc., 1999-2015. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, with or without modifications, so long as this
notice is included. Redistribution via other means is not permitted without prior permission. Additional terms apply. For complete
license terms please see the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="2.3.01 Express";
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,
null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&("string"===typeof c?(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),
Z.parameters=Z.Utils.parseParameters(a)):Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Viewer.configureViewer()};
Z.ZoomifyImageViewer=function(){function a(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=b:window.setTimeout(a,100)}function b(a){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),
Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0))}function c(a){a=Z.Utils.event(a);18==a.keyCode||a.altKey||Z.viewportCurrent.zoomAndPanAllStop(!0,!0);if(a){var b=a.type;a=a.keyCode;if("keydown"==b)switch(Z.keyIsDown=!0,a){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ||Z.viewportCurrent.pan("left");break;
case 38:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ||Z.viewportCurrent.pan("up");break;case 40:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ||Z.viewportCurrent.pan("down");break;case 39:Z.animation&&Z.viewportCurrent.getZoom()==Z.minZ||Z.viewportCurrent.pan("right");break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset()}else"keyup"==b&&(Z.keyIsDown=!1,90==a||17==a||65==a||16==a?Z.viewportCurrent.zoom("stop"):37==a||39==a?Z.viewportCurrent.pan("horizontalStop"):
38!=a&&40!=a||Z.viewportCurrent.pan("verticalStop"))}}function d(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);
break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var d=Z.Utils.event(a),h=d.type;if(d&&h){var m;a=Z.Utils.target(d);c=Z.Utils.relatedTarget(d);"resize"!=h&&(m=Z.Utils.getMousePosition(d));"DOMMouseScroll"==h&&(h="mousewheel");switch(h){case "mouseover":d=Z.Utils.nodeIsInViewer(a);h=Z.Utils.nodeIsInViewer(c);d&&h||(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.mouseOutDownPoint=null);break;
case "mouseout":d=Z.Utils.nodeIsInViewer(a);h=Z.Utils.nodeIsInViewer(c);d&&h||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==c||(Z.mouseIsDown?Z.mouseOutDownPoint=new Z.Utils.Point(m.x,m.y):(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "resize":Q||(Q=window.setTimeout(e,C));break;case "mousewheel":m=Math.max(-1,Math.min(1,
d.wheelDelta||-d.detail)),Z.viewportCurrent.mouseWheelHandler(m)}}if("mousedown"==b||"mousemove"==b)return!1}}}function e(a){Q&&(window.clearTimeout(Q),Q=null,h())}function h(){var a=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay),b=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,a.x,a.y);m.resizeViewer(a.x,a.y,b)}var m=this,r=[];Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%",
"0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]=
"none";var t=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay);Z.viewerW=t.x;Z.viewerH=t.y;Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);Z.autoResize=!1!==Z.autoResize&&Z.Utils.isElementFluid(Z.pageContainer);var C=parseInt(Z.Utils.getResource("DEFAULT_AUTORESIZESKIPDURATION"),10),Q;Z.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),10);this.configureViewer=function(){function b(){Z.clearCallback(e,b);m.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(Z.ViewerDisplay,
"mouseover",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);a();Z.autoResize&&Z.Utils.addEventListener(window,"resize",d);m.configureComponents(Z.viewportCurrent)}function c(){Z.clearCallback("readyViewer",c)}var e=Z.imageSet?"initializedViewer":"initializedViewport";Z.setCallback(e,
b);Z.setCallback("readyViewer",c);Z.Viewport=new Z.ZoomifyViewport;Z.viewportCurrent=Z.Viewport};this.configureComponents=function(a){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(a));0<Z.navigatorVisible&&!Z.Navigator&&(Z.Navigator=new Z.ZoomifyNavigator(a),Z.Navigator&&Z.Navigator.z682())};this.getVersion=function(){return Z.version};this.setSizeAndPosition=function(a,b,c,d,e){Z.viewerW=a;Z.viewerH=b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&
Z.Viewport.getStatus("initialized")&&Z.Viewport.setSizeAndPosition(a,b,c,d);b=1==Z.toolbarPosition?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,b),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));e&&Z.Viewport.updateView(!0)};this.getImagePath=function(){return m.getImage()};this.getImage=
function(){return Z.imagePath};this.setImagePath=function(a,b){"undefined"!==typeof b&&Z.Utils.stringValidate(b)&&(Z.imageProperties=b);m.setImage(a)};this.setImage=function(a,b,c){Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)&&(Z.Viewport.zoomAndPanAllStop(!0),Z.Utils.clearImageParameters(),Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(a),Z.Utils.validateImagePath(),Z.Viewport.setImagePath(Z.imagePath),"undefined"!==typeof b&&(Z.parameters=Z.Utils.parseParameters(b)),c&&Z.Utils.setParameters(Z.parameters),
"unconverted"==Z.tileSource?Z.Viewport.loadUnconvertedImage(a):Z.imageProperties?(a=Z.Utils.xmlConvertTextToDoc(Z.imageProperties),Z.Viewport.z602(a)):(a=new Z.NetConnector,Z.Viewport.loadImageProperties(Z.imagePath,a)))};this.setImageWithFade=function(a,b,c){Z.Viewport&&(Z.Viewport.getStatus("initialized")||c)&&(Z.slideTransitionTimeout=window.setTimeout(function(){Z.Viewport.slideTransitionTimeoutHandler("out",a,b,c)},50))};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(r,"state",
a);return-1==a?!1:r[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(r,"state",a);-1==d?(c=b,r[r.length]={state:a,status:b}):(!r[d].status&&b&&(c=!0),r[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewer"),m.validateViewerReady(a))};this.validateViewerStatus=function(a){var b=!0;if(Z.imageSet)for(var c=0,d=Z.imageSetLength;c<d;c++)if(!Z["Viewport"+c.toString()].getStatus(a)){b=!1;break}b&&m.setStatus(a,!0)};this.validateViewerReady=function(a){a=Z.Viewport&&Z.Viewport.getStatus("initialized")&&
("unconverted"==Z.tileSource||Z.Viewport.getStatus("precacheLoaded")&&Z.Viewport.getStatus("backfillLoaded")&&Z.Viewport.getStatus("backfillDrawn"))&&Z.Viewport.getStatus("displayLoaded")&&Z.Viewport.getStatus("displayDrawn");var b=!Z.hotspots||Z.Viewport.getStatus("hotspotsLoaded"),c=!Z.annotations||Z.Viewport.getStatus("annotationsLoaded")&&Z.Viewport.getStatus("annotationPanelInitialized"),d=0==Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.getInitialized(),e=!Z.NavigatorVisible||Z.Navigator&&Z.Navigator.getInitialized(),
h=!Z.RulerVisible||Z.Ruler&&Z.Ruler.getInitialized(),w=!Z.imageSet||Z.Viewer&&Z.Viewer.getStatus("initialized")&&("unconverted"==Z.tileSource||Z.Viewer.getStatus("precacheLoaded")&&Z.Viewer.getStatus("backfillLoaded")&&Z.Viewer.getStatus("backfillDrawn"))&&Z.Viewer.getStatus("displayLoaded")&&Z.Viewer.getStatus("displayDrawn"),q=!Z.imageSet||!Z.hotspots||Z.Viewer&&Z.Viewer.getStatus("hotspotsLoaded"),m=!Z.imageSet||!Z.annotations||Z.Viewer&&Z.Viewer.getStatus("annotationsLoaded")&&Z.Viewer.getStatus("annotationPanelInitialized");
(a=a&&b&&c&&d&&e&&h&&w&&q&&m)&&Z.Viewer.setStatus("ready",!0);return a};this.initializeViewerKeyEventListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",c),Z.Utils.addEventListener(document,"keyup",c)):(Z.Utils.removeEventListener(document,"keydown",c),Z.Utils.removeEventListener(document,"keyup",c))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):
(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))};this.autoResizeViewer=function(){h()};this.resizeViewer=function(a,b,c){m.setSizeAndPosition(a,b,0,0,!1);Z.viewportCurrent.resizeViewport(Z.imageX,Z.imageY,c,Z.imageR)};this.z586=function(a){Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteTimer&&(window.clearTimeout(Z.mouseWheelCompleteTimer),Z.mouseWheelCompleteTimer=null,Z.zooming="stop",Z.viewportCurrent.updateView(!0))}};
Z.ZoomifyViewport=function(a,b,c,d){function e(a,b,k,f,c,d,g,p,e,n,h){t();Z.imageW=a;Z.imageH=b;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Tb=c;Ea=k;Fa=f;P();C(V,S,cc,Lb);l.validateXYZDefaults();Aa>dc?(va=ra(Ha,Z.initialZ),N&&ma.scale(va,va)):ma=Xa=N=null;Ya=ra(na,Z.initialZ);kb=W=ra(L,Z.initialZ);if(Z.useCanvas)try{qa.scale(W,W)}catch(q){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function initializeViewportContinue scaling canvas:  "+
q)}"unconverted"!=Z.tileSource&&l.z619();y(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.initialFullPage&&l.toggleFullViewMode(!0);Z.Utils.addEventListener(T,"mousedown",u);Z.Utils.addEventListener(T,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(T,"touchstart",u);Z.Utils.addEventListener(T,"touchmove",u);Z.Utils.addEventListener(T,"touchend",u);Z.Utils.addEventListener(T,"touchcancel",u);Z.Utils.addEventListener(T,"gesturestart",u);Z.Utils.addEventListener(T,"gesturechange",
u);Z.Utils.addEventListener(T,"gestureend",u);Z.Utils.addEventListener(Y,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(ea,"contextmenu",Z.Utils.preventDefault);l.setStatus("initialized",!0);l.syncViewportRelated()}function h(a,b,k,f,c,d,g,p,e,n,h){l.setStatus("initialized",!1);Mb=Nb=0;"undefined"!==typeof wa&&Z.Utils.arrayClear(wa);"undefined"!==typeof xa&&Z.Utils.arrayClear(xa);"undefined"!==typeof lb&&Z.Utils.arrayClear(lb);"undefined"!==typeof mb&&Z.Utils.arrayClear(mb);"undefined"!==
typeof aa&&Z.Utils.arrayClear(aa);"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba);"undefined"!==typeof ab&&Z.Utils.arrayClear(ab);"undefined"!==typeof nb&&Z.Utils.arrayClear(nb);"undefined"!==typeof bb&&Z.Utils.arrayClear(bb);"undefined"!==typeof Pa&&Z.Utils.arrayClear(Pa);"undefined"!==typeof cb&&Z.Utils.arrayClear(cb);"undefined"!==typeof ob&&Z.Utils.arrayClear(ob);"undefined"!==typeof sa&&Z.Utils.arrayClear(sa);"undefined"!==typeof Qa&&Z.Utils.arrayClear(Qa);"undefined"!==typeof Va&&Z.Utils.arrayClear(Va);
N&&Z.Utils.clearDisplay(N);Y&&Z.Utils.clearDisplay(Y);ea&&Z.Utils.clearDisplay(ea);Ra&&Z.Utils.clearDisplay(Ra);Z.imageW=a;Z.imageH=b;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Tb=c;Ea=k;Fa=f;P();Z.Utils.setParameters(Z.parameters);r();t();l.validateXYZDefaults();Aa>dc?(va=ra(Ha,Z.initialZ),ma.restore(),ma.scale(va,va)):N=Xa=ma=null;Ya=ra(na,Z.initialZ);kb=W=ra(L,Z.initialZ);Z.useCanvas&&(qa.restore(),qa.scale(W,W));"unconverted"!=Z.tileSource&&l.z619();l.setSizeAndPosition(V,S,cc,Lb);y(Z.initialX,
Z.initialY,Z.initialZ,Z.initialR,null,!0);l.setStatus("initialized",!0);Z.Navigator&&0<Z.navigatorVisible&&Z.Navigator.setImage(Z.imagePath)}function m(){Aa=1;na=L=0;ja=!1;"undefined"!==typeof Ca&&Z.Utils.arrayClear(Ca);"undefined"!==typeof Ia&&Z.Utils.arrayClear(Ia);"undefined"!==typeof ta&&Z.Utils.arrayClear(ta);"undefined"!==typeof Ja&&Z.Utils.arrayClear(Ja);"undefined"!==typeof Ka&&Z.Utils.arrayClear(Ka);"undefined"!==typeof Ab&&Z.Utils.arrayClear(Ab);"undefined"!==typeof tierTileOffsetsCount&&
Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof sb&&Z.Utils.arrayClear(sb);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast)}
function r(a){if("undefined"===typeof a||null===a)a=0;a=a.toString();Z.useCanvas&&!N&&(Ob=Z.Utils.createContainerElement("canvas","oversizeDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(Ob),N=Ob,Xa=N.style);T||(tb=Z.Utils.createContainerElement("div","viewportContainer"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(tb),
T=tb,A=T.style);Y||(ec=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(ec),Y=ec,R=Y.style);ea||(fc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(fc),ea=fc,oa=ea.style);Z.useCanvas&&
!Ra&&(gc=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),tb.appendChild(gc),Ra=gc,Hb=Ra.style);Z.useCanvas||(Y.innerHTML="",ea.innerHTML="")}function t(){N&&(ma=N.getContext("2d"));ub=Y.getContext("2d");qa=ea.getContext("2d");Ib=Ra.getContext("2d")}function C(a,b,k,f){if("undefined"===typeof k||null===k)k=0;if("undefined"===typeof f||null===f)f=0;Z.viewerW=V=a;Z.viewerH=S=b;ga=V*Ec;
ha=S*Ec;a=Z.imageSet?Zc:"unconverted"==Z.tileSource&&Z.browser==Z.browsers.FIREFOX?$c:ad;b=Z.constrainPanStrict?Z.imageW:2*Z.imageW;var c=Z.constrainPanStrict?Z.imageH:2*Z.imageH;ga>a&&(ga=a);ha>a&&(ha=a);ga>b&&(ga=b);ha>c&&(ha=c);ga<V&&(ga=V);ha<S&&(ha=S);db=Z.Utils.roundToFixed(ga/2,4);eb=Z.Utils.roundToFixed(ha/2,4);ya=Z.Utils.roundToFixed(-((ga-V)/2)+k,4);Z.Utils.roundToFixed((ga-V)/2+k,4);za=Z.Utils.roundToFixed(-((ha-S)/2)+f,4);Z.Utils.roundToFixed((ha-S)/2+f,4);N&&(N.width=V,N.height=S,Xa.width=
V+"px",Xa.height=S+"px",Xa.left="0px",Xa.top="0px");T.width=ga;T.height=ha;A.width=ga+"px";A.height=ha+"px";A.left=ya+"px";A.top=za+"px";ea.width=ga;ea.height=ha;oa.width=ga+"px";oa.height=ha+"px";if(Z.useCanvas){N&&(ma.translate(V/2,S/2),ma.save());try{qa.translate(db,eb)}catch(d){Z.Utils.showMessage(Z.Utils.getResource("ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function setSizeAndPosition translating canvas:  "+d)}qa.save()}}function Q(a,b,k){if("ZoomifyImageFile"==Z.tileSource){k=
parseFloat(Z.Utils.getResource("z125"));var f=parseFloat(Z.Utils.getResource("z124"));b.loadByteRange(a,k,f,"header")}else"ZoomifyImageFolder"==Z.tileSource&&(a=Z.Utils.cacheProofPath(a+"/ImageProperties.xml"),b.loadXML(a,k))}function v(a,b){m();if("undefined"===typeof l.getStatus)window.setTimeout(function(){v(a,b)},100);else{var k=null,f=null,c=null,d=null,g=null,p=null;"ZoomifyImageFolder"==Z.tileSource&&(k=parseInt(a.documentElement.getAttribute("WIDTH"),10),f=parseInt(a.documentElement.getAttribute("HEIGHT"),
10),g=parseInt(a.documentElement.getAttribute("NUMTILES"),10),parseInt(a.documentElement.getAttribute("NUMIMAGES"),10),p=parseInt(a.documentElement.getAttribute("VERSION"),10),c=d=parseInt(a.documentElement.getAttribute("TILESIZE"),10));null!==Z.tileW&&(c=Z.tileW);null!==Z.tileH&&(d=Z.tileH);if("ZoomifyImageFolder"==Z.tileSource||"ImageServer"==Z.tileSource){if(null===c||isNaN(c))c=Ea;if(null===d||isNaN(d))d=Fa;if(null===g||isNaN(g))g=1}!isNaN(k)&&0<k&&!isNaN(f)&&0<f&&!isNaN(c)&&0<c&&!isNaN(d)&&0<
d&&0<g?l.getStatus("initialized")?h(k,f,c,d,g,p,null,null,null,null,null,b):e(k,f,c,d,g,p,null,null,null,null,null,b):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function P(){if("unconverted"==Z.tileSource)Ca[0]=Z.imageW,Ia[0]=Z.imageH,ta[0]=1,Ja[0]=1,Aa=Ka[0]=1;else if("ZoomifyImageFile"==Z.tileSource)for(var a=Aa-1;0<=a;a--)ta[a]=Math.ceil(Ca[a]/Ea),Ja[a]=Math.ceil(Ia[a]/Fa),Ka[a]=ta[a]*Ja[a];else{for(var a=
Z.imageW,b=Z.imageH;a>Ea||b>Fa;)a/=2,b/=2,Aa++;for(var a=Z.imageW,b=Z.imageH,k=0,f=Aa-1;0<=f;f--)Ca[f]=a,Ia[f]=b,ta[f]=Math.ceil(Ca[f]/Ea),Ja[f]=Math.ceil(Ia[f]/Fa),Ka[f]=ta[f]*Ja[f],a/=2,b/=2,k+=Ka[f];if(k!=Tb&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){Ca=[];Ia=[];ta=[];Ja=[];Aa=1;a=Z.imageW;b=Z.imageH;for(k=2;a>Ea||b>Fa;)a=Math.floor(Z.imageW/k),b=Math.floor(Z.imageH/k),k*=2,a%2&&a++,b%2&&b++,Aa++;a=Z.imageW;b=Z.imageH;k=2;tileCounter=
0;for(f=Aa-1;0<=f;f--)ta[f]=Math.floor(a/Ea),a%Ea&&ta[f]++,Ja[f]=Math.floor(b/Fa),b%Fa&&Ja[f]++,Ka[f]=ta[f]*Ja[f],tileCounter+=Ka[f],Ca[f]=a,Ia[f]=b,a=Math.floor(Z.imageW/k),b=Math.floor(Z.imageH/k),k*=2,a%2&&a++,b%2&&b++;a=tileCounter;a!=Tb&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}}function ca(a,b){for(var k=ta[a]-1,f=Ja[a]-1,c=0;c<=k;c++)for(var d=0;d<=f;d++)b[b.length]=a+"-"+c+"-"+d}function U(a){if(a){a=l.z542(na);Z.Utils.arrayClear(xa);Z.Utils.arrayClear(lb);b=a.l;for(k=a.r;b<=k;b++)for(f=
a.t,c=a.b;f<=c;f++)d=na+"-"+b+"-"+f,lb[lb.length]=d,xa[xa.length]=d;ka(xa,la,"simple","image-backfill")}else{Z.Utils.arrayClear(mb);Z.Utils.arrayClear(nb);Z.Utils.arrayClear(bb);Z.Utils.arrayClear(aa);a=l.z542();for(var b=a.l,k=a.r;b<=k;b++)for(var f=a.t,c=a.b;f<=c;f++){var d=L+"-"+b+"-"+f;mb[mb.length]=d;aa[aa.length]=d}if(l.getStatus("initialized")&&0<wa.length&&(L==Ub||L==Vb||L==Pb))for(b=0,k=wa.length;b<k;b++)(f=wa[b])&&f.t==L&&f.c>=a.l&&f.c<=a.r&&f.r>=a.t&&f.r<=a.b&&(bb[bb.length]=f.name,nb[nb.length]=
f,c=Z.Utils.arrayIndexOf(aa,f.name),-1!=c&&(aa=Z.Utils.arraySplice(aa,c,1)));b=0;for(k=Ba.length;b<k;b++)(f=Ba[b])&&f.t==L&&f.c>=a.l&&f.c<=a.r&&f.r>=a.t&&f.r<=a.b&&(c=Z.Utils.arrayIndexOf(bb,f.name),-1==c&&(bb[bb.length]=f.name,nb[nb.length]=f),f=Z.Utils.arrayIndexOf(aa,f.name),-1!=f&&(aa=Z.Utils.arraySplice(aa,f,1)));if(0!=Mb){b=0;for(k=Pa.length;b<k;b++)f=Pa[b],f.alpha=1;Z.Utils.arrayClear(Pa);Z.Utils.arrayClear(cb)}Nb=aa.length;l.traceDebugValues("tilesToDisplay",null,mb.length,mb);l.traceDebugValues("tilesInCache",
null,bb.length,bb);l.traceDebugValues("tilesToLoad",null,aa.length,aa)}}function G(a,b,k,f,c,d){c||Z.Utils.clearDisplay(a);if("canvasCopy"==f)Z.Utils.clearDisplay(ea),qa.restore(),qa.save(),qa.scale(1,1),qa.drawImage(Ra,-db,-eb),qa.restore(),qa.save(),qa.scale(W,W);else{c=l.z542(b);d=[];if(null===k)for(var g=0,p=nb.length;g<p;g++)d[g]=nb[g];else if(0<k.length)for(g=0,p=k.length;g<p;g++){var e=k[g];e&&e.t==b&&(b==na&&!ja||e.c>=c.l&&e.c<=c.r&&e.r>=c.t&&e.r<=c.b)&&(d[d.length]=k[g])}if(0<d.length)if(l.traceDebugValues("z622-"+
a.id,null,null,d),"centerOut"==f)for(g=Math.floor(d.length/2),p=d.length;g<p;g++)M(a,b,d[g]),d.length-g-1!=g&&M(a,b,d[d.length-g-1]);else for(g=0,p=d.length;g<p;g++)M(a,b,d[g]);else l.traceDebugValues("No cached tiles in view");l.traceDebugValues("blankLine")}}function K(a,b){var k=l.z542();syncTransitionCanvas();for(var f=0,c=b.length;f<c;f++){var d=b[f];d&&d.t==a&&(a==na||d.c>=k.l&&d.c<=k.r&&d.r>=k.t&&d.r<=k.b)&&M(Ra,a,d)}}function w(a){Ga=null;Ga=new Image;Ga.onload=q;Ga.onerror=F;Ga.src=a}function q(){if("undefined"!==
typeof Ga){var a=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",V+"px",S+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);a.appendChild(Ga);a.removeChild(Ga);var a=null,a=Ga.width,b=Ga.height;l.setStatus("displayLoaded",!0);l.setStatus("displayDrawn",!0);0!=a&&0!=b?e(a,b,a,b,null,null,null,null,null,null,null):window.setTimeout(function(){q()},100)}else window.setTimeout(function(){q()},100)}function F(){Z.Utils.showMessage(Z.Utils.getResource("ERROR_UNCONVERTEDIMAGEPATHINVALID"))}
function ka(a,b,k,f){var c="undefined"!==typeof f&&null!==f?"-"+f:"";if(0<a.length){l.traceDebugValues("z577"+c,null,null,a);c=(new Date).getTime();if("centerOut"==k&&4<a.length){var d=[],g=0,p=0,e=0,n=0;for(k=0;k<a.length;k++){var h=a[k];h&&(h=new D(h,f),d[d.length]=h,0==k?(g=p=h.c,e=n=h.r):(h.c<g?g=h.c:h.c>p&&(p=h.c),h.r<e?e=h.r:h.r>n&&(n=h.r)))}a=g+(p-g)/2;f=e+(n-e)/2;for(k=0;k<d.length;k++)d[k].r-=f,d[k].c-=a;d.sort(function(a,b){return a.r*a.r+a.c*a.c-(b.r*b.r+b.c*b.c)});for(k=0;k<d.length;k++)d[k].r+=
f,d[k].c+=a,Da(d[k],c,b)}else for(k=0,d=a.length;k<d;k++)if(h=a[k])h=new D(h,f),Da(h,c,b);l.traceDebugValues("blankLine")}else l.traceDebugValues("z577"+c,"No new tiles requested")}function D(a,b){this.name=a;var k=new ba(a);this.t=k.t;this.c=k.c;this.r=k.r;this.x=Math.floor(this.c*Ea);this.y=Math.floor(this.r*Fa);this.image=null;this.alpha=0;this.url=l.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function ba(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=
parseInt(a.substring(a.indexOf("-")+1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function O(a,b,k){k=b+k*ta[a];b=8*k+Ab[a];k=Math.floor(k/vb);var f=k*vb,f=f+vb>Ka[a]?8*(Ka[a]-f):Fc;this.chunkStart=Ab[a]+k*Fc;this.chunkEnd=this.chunkStart+f;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+k.toString()}function B(a,b,k){k=b+k*ta[a];b=4*k+sb[a];k=Math.floor(k/vb);var f=k*vb,f=f+vb>Ka[a]?4*(Ka[a]-f):Gc;this.chunkStart=sb[a]+k*Gc;this.chunkEnd=
this.chunkStart+f;this.bcStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+k.toString()}function J(a,b){for(var k=0,f=sa.length;k<f;k++){var c=sa[k].split(",");c[0]==a&&c[5]==b&&(void 0!==c[4]&&"image-display"==c[4]?Qa[Qa.length]=c[1]+"-"+c[2]+"-"+c[3]:"image-backfill"==c[4]&&(Va[Va.length]=c[1]+"-"+c[2]+"-"+c[3]),sa=Z.Utils.arraySplice(sa,k,1),k--,f--)}0<Qa.length&&(Qa.sort(),Qa=Z.Utils.arrayUnique(Qa),l.traceDebugValues("z637",Qa),k=fa,Wa(Qa,k,"simple","image-display"));0<Va.length&&
(Va.sort(),Va=Z.Utils.arrayUnique(Va),k=la,Wa(Va,k,"simple","image-backfill"))}function Wa(a,b,k,f){k=(new Date).getTime();for(var c=0,d=a.length;c<d;c++){var g=null;if(g=a[c])if(a=Z.Utils.arraySplice(a,c,1),c--,d--,index=Z.Utils.arrayIndexOfObjectValue(ob,"name",g),-1!=index?(g=ob[index],ob=Z.Utils.arraySplice(ob,index,1),g.url=l.formatTilePath(g.t,g.c,g.r,f)):g=new D(g,f),null!=g&&-1==g.url.indexOf("NaN"))l.traceDebugValues("z577Retry",g.name+"  "+g.url),Da(g,k,b);else if(-1==g.url.indexOf("NaN")){var p=
parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+g.name+".jpg",!1,p,"center",!1)}}}function Da(a,b,k){var f=a.name;if("z647"==a.url.substr(0,8)){p(a);b=a.name;k=Z.Utils.arrayIndexOf(aa,b);-1!=k&&(aa=Z.Utils.arraySplice(aa,k,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)k=Z.Utils.arrayIndexOf(Qa,b),-1!=k&&(Qa=Z.Utils.arraySplice(Qa,k,1));Pa[Pa.length]=a;cb[cb.length]=b}else if("offsetLoading"==a.url)-1==Z.Utils.arrayIndexOfObjectValue(ob,
"name",f)&&(ob[ob.length]=a),l.traceDebugValues("z581DelayForOffset",f);else if("offsetLoading"!=a.url){var c;k==fa?c="image-display":k==la&&(c="image-backfill");var d=a.t==Ub&&Hc||a.t==Vb&&Ic||a.t==Pb&&Jc;"image-display"==c&&d||(a.loadTime=b,l.traceDebugValues("z581-"+c,f),bd.loadImage(a.url,Z.Utils.createCallback(null,k,a),c,a))}}function fa(a,b){if(a&&b){a.image=b;var k=a.name,f=Z.Utils.arrayIndexOf(aa,k);if(-1!=f){aa=Z.Utils.arraySplice(aa,f,1);p(a);-1==Z.Utils.arrayIndexOf(cb,k)&&(cb[cb.length]=
k,Pa[Pa.length]=a);Wb||(Wb=window.setInterval(E,50));Mb=aa.length;if(0==Mb){Z.useCanvas&&0<Bb&&(hc?(K(L,Ba),G(ea,L,Ba,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(Ra)},200),hc=!1):G(ea,L,Ba,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(;ab.length>Bb&&Ba.length>Bb;)ab=Z.Utils.arraySplice(ab,0,1),Ba=Z.Utils.arraySplice(Ba,0,1);Nb=0}l.traceDebugValues("onTileLoad",a.name,a.loadTime);l.updateProgress(Nb,Mb)}ic==jc+Cb&&l.setStatus("displayLoaded",
!0)}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+a.name+".jpg")}function la(a,b){if(a&&b){a.image=b;var k=a.name;wa[wa.length]=a;var f=Z.Utils.arrayIndexOf(xa,k);-1!=f&&(xa=Z.Utils.arraySplice(xa,f,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)k=Z.Utils.arrayIndexOf(Va,k),-1!=k&&(Va=Z.Utils.arraySplice(Va,k,1));a.alpha=1;a.t==na&&M(Y,na,a);l.traceDebugValues("onTileBackfillPrecache",a.name);Kc==kc&&l.setStatus("precacheLoaded",!0);l.traceDebugValues("z599",
a.name);lc<=0+mc&&l.setStatus("backfillLoaded",!0);a.t==L&&fa(a,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+a.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+a.name+".jpg")}function E(a){for(var b=a=0,k=Pa.length;b<k;b++){var f=Pa[b];f.t==L?(0!=nc&&1>f.alpha+nc?f.alpha+=nc:(f.alpha=1,a++),M(ea,L,f),a>=k&&(window.clearInterval(Wb),Wb=null,b=k)):(Pa=Z.Utils.arraySplice(Pa,b,1),cb=Z.Utils.arraySplice(cb,b,1),f=Z.Utils.arrayIndexOf(aa,
f.name),-1!=f&&(aa=Z.Utils.arraySplice(aa,f,1)),k--)}}function M(a,b,k){if("z647"!=k.url.substr(0,8)&&0!=k.image.width&&0!=k.image.height){var f=k.x,c=k.y;b=ua(b,1);va=ra(Ha,l.getZoom());var d=8<va;Z.useCanvas?(a==ea||a==Ra||a==Y&&ja?(f-=Z.imageX*b,c-=Z.imageY*b):a==N&&(ja||d)&&(d=l.calculateCurrentCenterCoordinates(),f-=d.x*b,c-=d.y*b),b=a.getContext("2d"),Z.alphaSupported&&1>k.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=k.alpha),b.drawImage(k.image,f,c),
Z.alphaSupported&&1>k.alpha&&"transitionCanvas"!=a.id&&"oversizeDisplay"!=a.id&&(b.globalAlpha=1)):(a==ea?(f-=Z.imageX*b-db/W,c-=Z.imageY*b-eb/W,b=W):b=Ya,k.elmt||(k.elmt=Z.Utils.createContainerElement("img"),k.elmt.onmousedown=Z.Utils.preventDefault,Z.Utils.addEventListener(k.elmt,"contextmenu",Z.Utils.preventDefault),k.elmt.src=k.url,k.style=k.elmt.style,k.style.position="absolute",Z.Utils.renderQuality(k,Z.renderQuality),Z.cssTransformsSupported&&(k.style[Z.cssTransformProperty+"Origin"]="0px 0px")),
k.elmt.parentNode!=a&&a.appendChild(k.elmt),d=k.style,d.display="none",Z.cssTransformsSupported?d[Z.cssTransformProperty]=["matrix(",(k.image.width/k.elmt.width*b).toFixed(8),",0,0,",(k.image.height/k.elmt.height*b).toFixed(8),",",(f*b).toFixed(8),Z.cssTransformNoUnits?",":"px,",(c*b).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(d.width=k.image.width*b+"px",d.height=k.image.height*b+"px",d.left=f*b+"px",d.top=c*b+"px"),d.display="inline-block",Z.Utils.setOpacity(k,k.alpha));a==ea?(l.traceDebugValues("z507",
k.name),ic==Xb&&l.setStatus("displayDrawn",!0)):(l.traceDebugValues("displayBackfillTile",k.name),lc<=oc&&l.setStatus("backfillDrawn",!0))}}function x(a,b){var c=ua(b,1),f=Math.floor(a.l*c/Ea),d=Math.floor(a.r*c/Ea),g=Math.floor(a.t*c/Fa),c=Math.floor(a.b*c/Fa);0>f&&(f=0);d>ta[b]-1&&(d=ta[b]-1);0>g&&(g=0);c>Ja[b]-1&&(c=Ja[b]-1);this.l=f;this.r=d;this.t=g;this.b=c}function g(a,b,c,f,d,g,p){this.l=a+c/p;this.r=a+f/p;this.t=b+d/p;this.b=b+g/p}function pa(a,b){var c=a-Z.Utils.getElementPosition(Z.ViewerDisplay).x,
f=b-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(c,f)}function X(a,b,c,f){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof f||null===f)f=Z.imageR;0>f&&(f+=360);var d=parseFloat(A.left)+db,g=parseFloat(A.top)+eb;a-=d;b-=g;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,f),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+a/c,Z.imageY+b/c)}function n(a,b,c,f){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===
typeof f||null===f)f=Z.imageR;0>f&&(f+=360);a=(Z.imageX-a)*c;b=(Z.imageY-b)*c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-f),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(ya+a,za+b)}function ua(a,b){return Ca[a]/Z.imageW*b}function ra(a,b){return b/(Ca[a]/Z.imageW)}function La(a,b,c,f,d){if(Z.constrainPan){f=Math.round(f);var g=a,p=b;c="undefined"!==typeof c&&null!==c?c:Z.imageZ;f="undefined"!==typeof f&&null!==f?f:Z.imageR;0>f&&(f+=360);var e=Z.Utils.getDisplayPositionRotated(A,
f),l=Z.imageW,n=Z.imageH,h=V,q=S,X=Math.round(l*c),w=Math.round(n*c);if("container"==d){var ia=c,m=f;if("undefined"===typeof ia||null===ia)ia=Z.imageZ;if("undefined"===typeof m||null===m)m=Z.imageR;0>m&&(m+=360);a=(ya-a)/ia;b=(za-b)/ia;var y,F;switch(m){case 0:y=Z.imageX+a;F=Z.imageY+b;break;case 90:y=Z.imageX+b;F=Z.imageY-a;break;case 180:y=Z.imageX-a;F=Z.imageY-b;break;case 270:y=Z.imageX-b,F=Z.imageY+a}b=new Z.Utils.Point(y,F);a=b.x;b=b.y}m=Z.constrainPanStrict?0:h/2/c;F=Z.constrainPanStrict?0:
q/2/c;y=(h+e.y)/2/c-m;m=l-(h+e.y)/2/c+m;ia=(q+e.x)/2/c-F;e=n-(q+e.x)/2/c+F;a=(0==f||180==f)&&X>h||(90==f||270==f)&&X>q||!Z.constrainPanStrict?a<=y?y:a>=m?m:a:l/2;b=(0==f||180==f)&&w>q||(90==f||270==f)&&w>h||!Z.constrainPanStrict?b<=ia?ia:b>=e?e:b:n/2;if("container"==d){var pa;d=c;c=f;if("undefined"===typeof d||null===d)d=Z.imageZ;if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);var da;switch(c){case 0:pa=a-Z.imageX;da=b-Z.imageY;break;case 90:pa=Z.imageY-b;da=a-Z.imageX;break;case 180:pa=
Z.imageX-a;da=Z.imageY-b;break;case 270:pa=b-Z.imageY,da=Z.imageX-a}pa=new Z.Utils.Point(ya-pa*d,za-da*d);a=pa.x;b=pa.y}a==g&&b==p||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(a,b)}function Za(a){a>Z.maxZ?(a=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):a<Z.minZ&&(a=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return a}function p(a){if(0<Bb){var b=Z.Utils.arrayIndexOf(ab,a.name);-1!=b&&(ab=Z.Utils.arraySplice(ab,b,1),Ba=Z.Utils.arraySplice(Ba,b,1));ab[ab.length]=
a.name;Ba[Ba.length]=a}}function ia(){window.clearTimeout(Jb);Jb=null;Db=((new Date).getTime()-tilesTimeStart)/1E3;var a=Yb*Db,a=Eb&&Cb<a,b=Eb&&Cb>=Zb;if(2==Z.debug||3==Z.debug)Z.Utils.trace("View validation-time elapsed: "+Db),0<Eb&&(a?Z.Utils.trace("Loading delay - re-calling updateView"):b?Z.Utils.trace("Display delay - re-calling updateView"):Z.Utils.trace("Progress slow, resetting timer")),Z.Utils.trace(""),Z.traces.scrollTop=Z.traces.scrollHeight,Z.Utils.traceTileSpeed(Db,Yb);0<Eb?$b<cd?a||
b?($b+=1,l.updateView(!0)):Jb=window.setTimeout(ia,Lc):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):($b=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function da(a){Z.preventDupCall||(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof a&&null!==a}function y(a,b,c,f,d,g){g||l.zoomAndPanAllStop();if("undefined"===typeof a||null===a)a=Z.imageW/2;if("undefined"===
typeof b||null===b)b=Z.imageH/2;"undefined"===typeof c||null===c?c=Z.fitZ:1<c&&(c/=100);if("undefined"===typeof f||null===f)f=Z.imageR;c=Za(c);f=90*Math.round(Math.abs(f)/90)*Z.Utils.getSign(f);-360>=f?f+=360:360<=f&&(f-=360);a=La(a,b,c,f,"image");Z.imageX=pc=a.x;Z.imageY=qc=a.y;Z.imageZ=c;f!=Z.imageR&&Z.Utils.rotateElement(A,f);Z.imageR=f;l.updateView(!0);"function"===typeof d&&d()}function rc(){if(pb&&(0!=Ma||0!=Na||0!=Sa)){var a=Ma,b=Na,c=Sa,f=l.getZoom();0!=c&&(f=ua(L,W*(1+c)),f=Za(f),f!=Z.imageZ&&
sc(f));if(0!=a||0!=b)a=parseFloat(A.left)+a,b=parseFloat(A.top)+b,f=La(a,b,f,Z.imageR,"container"),A.left=Math.round(f.x)+"px",A.top=Math.round(f.y)+"px",b=f.x-ya,f=f.y-za,N&&ja&&(Z.mobileDevice||Math.abs(b)>V/2||Math.abs(f)>S/2)&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display");l.syncViewportRelated();Mc++;pb=window.setTimeout(rc,tc)}}function Nc(a,b,c,f,d,g,p){Qb++;var e=d/g,h=Qb*e,q=Z.Utils.easing(Z.imageX,a,h,d),X=Z.Utils.easing(Z.imageY,b,h,d),w=Z.Utils.easing(Z.imageZ,c,h,d),h=Z.Utils.easing(Z.imageR,
f,h,d),X=n(q,X,w),q=X.x,X=X.y,ia=!1,m=syncOversize=!1;if(parseFloat(A.left)!=q||parseFloat(A.top)!=X)A.left=q+"px",A.top=X+"px",m=!0,N&&ja&&(syncOversize=!0);w!=Z.imageZ&&(sc(w,!1),ia=m=!0,N&&ja&&(ma.restore(),ma.save(),ma.scale(va,va),syncOversize=!0));h!=Z.imageR&&(Z.Utils.rotateElement(A,h),N&&ja&&(ma.rotate((h-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=h,m=!0);syncOversize&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display");l.syncViewportRelated(!1,!1,!1,!1,!1);0==Qb%2&&l.syncViewportRelated(!1,
!1,ia,m,ia);w=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);Qb<g+1&&!w?wb=window.setTimeout(function(){Nc(a,b,c,f,d,g,p)},e):(w&&(Z.tourPlaying=!1),Z.interactivityOff=!1,wb&&(window.clearTimeout(wb),wb=null),l.updateView(),"function"===typeof p&&p())}function Oc(){Mc=Sa=Na=Ma=0;pb&&(window.clearTimeout(pb),pb=null)}function sc(a,b){var c=!1,f=ra(L,a);if(f!=W){W=f;var c=f/kb,d=ga*c,g=ha*c,p=(ga-d)/2,e=(ha-g)/2;f<kb&&(f=La(parseFloat(A.left),parseFloat(A.top),a,Z.imageR,"container"),A.left=f.x+"px",
A.top=f.y+"px");if(Z.useCanvas)if(oa.width=d+"px",oa.height=g+"px",oa.left=p+"px",oa.top=e+"px",va=ra(Ha,l.getZoom()),f=8<va,ja||f){if(null!==ma&&"undefined"===typeof b||null===b||b&&N&&("in"!=Z.zooming||d>Z.scaleThreshold||g>Z.scaleThreshold))ma.restore(),ma.save(),ma.scale(va,va),ma.rotate(Z.imageR*Math.PI/180),G(N,Ha,wa,"simple",!1,"Updating backfill oversize display");Ya=c=ra(na,a);d=c/tierBackfillScalePrior;c=fb*d;d*=gb;g=Ta+(fb-c)/2;f=Ua+(gb-d)/2;R.width=c+"px";R.height=d+"px";R.left=g+"px";
R.top=f+"px"}else N&&Z.Utils.clearDisplay(N),d=fb*c,g=gb*c,p=Ta+Z.imageX*(1-c)*Z.imageZ,e=Ua+Z.imageY*(1-c)*Z.imageZ,R.width=d+"px",R.height=g+"px",R.left=p+"px",R.top=e+"px";else G(ea,L,Ba,"centerOut",!1,"Scaling: non-canvas zoom"),ja?(c=Pc,fb=ga*c,gb=ha*c,Ta=-(ga/c),Ua=-(ha/c),uc=db*c,vc=eb*c,Y.width=fb,Y.height=gb,R.width=Y.width+"px",R.height=Y.height+"px"):(c=Ia[na],Y.width=Ca[na],Y.height=c,c=Z.imageY*a,Ta=db-Z.imageX*a,Ua=eb-c),R.left=Ta+"px",R.top=Ua+"px",G(Y,na,wa,"simple",!1,"Scaling: non-canvas zoom - backfill");
c=!0}return c}function u(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),f=a.altKey;if("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&f)||c)Z.tourStop=!0;else{if("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)l.zoomAndPanAllStop(),Z.interactivityOff=!1;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){l.zoomAndPanAllStop(!1,
!0)},1);else if("touchstart"==b||"gesturestart"==b)touch=Z.Utils.getFirstTouch(a),l.zoomAndPanAllStop(!1,!0);switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",u);Z.Utils.addEventListener(document,"mouseup",u);break;case "mouseup":Z.Utils.removeEventListener(document,
"mousemove",u),Z.Utils.removeEventListener(document,"mouseup",u)}dd(a);if("mousedown"==b||"mousemove"==b)return!1}}}function dd(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c,f;if("touchstart"==b||"touchmove"==b||"touchend"==b||"touchcancel"==b)c=Z.Utils.getFirstTouch(a),"undefined"!==typeof c&&(f=new Z.Utils.Point(c.pageX,c.pageY));else{Z.Utils.target(a);Z.Utils.relatedTarget(a);var d=Z.Utils.isRightMouseButton(a),g=a.altKey;"resize"!=b&&(f=Z.Utils.getMousePosition(a));Z.smoothPan&&(Fb=f)}"DOMMouseScroll"==
b&&(b="mousewheel");var p=l.getZoom();"undefined"!==typeof f&&null!==f&&l.getClickCoordsInImage(a,p,f);switch(b){case "mousedown":Z.mouseIsDown=!0;Oa=new Z.Utils.Point(f.x,f.y);T.mouseXPrior=f.x;T.mouseYPrior=f.y;Z.smoothPan&&!g&&Z.mousePan&&1<Z.smoothPanEasing&&(ac(void 0),wc=Oa,null===Rb&&(Rb=new Z.Utils.Point(parseFloat(A.left),parseFloat(A.top))),null===hb&&(hb=window.setInterval(ed,50)));break;case "mousemove":xb=new Z.Utils.Point(f.x,f.y);I&&(clearTimeout(I),I=null);!g&&Z.mousePan&&(hb?Fb=f:
Z.animation&&l.getZoom()==Z.minZ?(f.x>T.mouseXPrior?Z.Viewer.viewportNext():f.x<T.mouseXPrior&&Z.Viewer.viewportPrior(),T.mouseXPrior=f.x,T.mouseYPrior=f.y):(d=f.x-T.mouseXPrior,a=f.y-T.mouseYPrior,isNaN(d)||isNaN(a)||(d=parseFloat(A.left)+d,a=parseFloat(A.top)+a,g=La(d,a,Z.imageZ,Z.imageR,"container"),A.left=g.x+"px",A.top=g.y+"px",T.mouseXPrior=f.x,T.mouseYPrior=f.y,d=g.x-ya,a=g.y-za,N&&ja&&(Z.mobileDevice||Math.abs(d)>V/2||Math.abs(a)>S/2)&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display"),
Z.Navigator&&(f=l.calculateCurrentCenterCoordinates(g,Z.imageZ,Z.imageR),Z.Navigator.z658(f)))));break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,l.getClickCoordsInImage(a,p,Z.mouseOutDownPoint)):f=new Z.Utils.Point(f.x,f.y);f=Z.Utils.calculatePointsDistance(Oa.x,Oa.y,f.x,f.y);if(4>f||!g&&("freehand"==Z.labelMode||"rectangle"==Z.labelMode)){if(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==
Z.editing||"editLabel"==Z.editing))g&&!d||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||(Z.Utils.addEventListener(document,"mousemove",u),I?(clearTimeout(I),I=null,Z.Utils.removeEventListener(document,"mousemove",u)):(I=setTimeout(function(a){I=null},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"mousemove",u)));else if(null===Z.editing||"view"==Z.labelMode){if(Z.clickZoom||Z.clickPan){f=
I&&Z.doubleClickZoom?!0:!1;var e=l.getClickZoomCoords3D(a,Oa,L,W,f)}Z.clickZoom?Z.doubleClickZoom?I?(clearTimeout(I),I=null,l.zoomAndPanToView(e.x,e.y,e.z)):I=setTimeout(function(a){I=null;l.zoomAndPanToView(e.x,e.y,e.z)},Z.doubleClickDelay):window.setTimeout(function(){l.zoomAndPanToView(e.x,e.y,e.z)},1):Z.clickPan&&l.zoomAndPanToView(e.x,e.y,Z.imageZ)}Z.mousePan&&!Z.smoothPan&&l.updateView()}Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<
Z.navigatorVisible&&Z.Navigator.setVisibility(!1));break;case "touchstart":c&&!qb&&(Z.mouseIsDown=!0,Sb=!1,Oa=new Z.Utils.Point(f.x,f.y),T.mouseXPrior=f.x,T.mouseYPrior=f.y,g||"view"==Z.labelMode||"addLabel"!=Z.editing&&"editLabel"!=Z.editing&&(null!==Z.editMode||"measure"!=Z.labelMode)||Z.Utils.hideMessage());break;case "touchmove":!c||qb||Sb||(xb=new Z.Utils.Point(f.x,f.y),I&&(clearTimeout(I),I=null),!g&&Z.mousePan&&(hb?Fb=f:(d=f.x-T.mouseXPrior,a=f.y-T.mouseYPrior,isNaN(d)||isNaN(a)||(d=parseFloat(A.left)+
d,a=parseFloat(A.top)+a,g=La(d,a,Z.imageZ,Z.imageR,"container"),A.left=g.x+"px",A.top=g.y+"px",T.mouseXPrior=f.x,T.mouseYPrior=f.y,d=g.x-ya,a=g.y-za,N&&ja&&(Z.mobileDevice||Math.abs(d)>V/2||Math.abs(a)>S/2)&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(f=l.calculateCurrentCenterCoordinates(g,Z.imageZ,Z.imageR),Z.Navigator.z658(f))))));break;case "touchend":if(!qb&&!Sb){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,
l.getClickCoordsInImage(a,p,Z.mouseOutDownPoint)):f="undefined"!==typeof f&&null!==f?new Z.Utils.Point(f.x,f.y):"undefined"!==typeof xb&&null!==xb?xb:Oa;f=Z.Utils.calculatePointsDistance(Oa.x,Oa.y,f.x,f.y);if(4>f||!g&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing))g||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||(Z.Utils.addEventListener(document,
"touchmove",u),I?(clearTimeout(I),I=null,Z.Utils.removeEventListener(document,"touchmove",u)):(I=setTimeout(function(a){I=null},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",u)));else if(null===Z.editing||"view"==Z.labelMode)Z.clickZoom?(f=I&&Z.doubleClickZoom?!0:!1,e=l.getClickZoomCoords3D(a,Oa,L,W,f),Z.doubleClickZoom?I?(clearTimeout(I),I=null,l.zoomAndPanToView(e.x,e.y,e.z)):I=setTimeout(function(a){I=null;l.zoomAndPanToView(e.x,
e.y,e.z)},Z.doubleClickDelay):window.setTimeout(function(){l.zoomAndPanToView(e.x,e.y,e.z)},1)):Z.clickPan&&l.zoomAndPanToView(e.x,e.y,Z.imageZ);Z.mousePan&&!hb&&l.updateView();Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1))}break;case "touchcancel":if(!qb&&!Sb){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(f=Z.mouseOutDownPoint,l.getClickCoordsInImage(a,
p,Z.mouseOutDownPoint)):f="undefined"!==typeof f&&null!==f?new Z.Utils.Point(f.x,f.y):"undefined"!==typeof xb&&null!==xb?xb:Oa;f=Z.Utils.calculatePointsDistance(Oa.x,Oa.y,f.x,f.y);if(4>f||!g&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))if(null===Z.editMode&&"measure"==Z.labelMode||"view"!=Z.labelMode&&("addLabel"==Z.editing||"editLabel"==Z.editing))"addLabel"!=Z.editing||g||"text"!=Z.labelMode&&"icon"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||l.saveEditsLabel(!0,!1,!1),
g||"freehand"!=Z.labelMode&&"rectangle"!=Z.labelMode&&"polygon"!=Z.labelMode&&"measure"!=Z.labelMode||(Z.Utils.addEventListener(document,"touchmove",u),I?(clearTimeout(I),I=null,Z.Utils.removeEventListener(document,"touchmove",u)):(I=setTimeout(function(a){I=null},Z.doubleClickDelay),"polygon"!=Z.labelMode&&"measure"!=Z.labelMode&&Z.Utils.removeEventListener(document,"touchmove",u)));else{if(null===Z.editing||"view"==Z.labelMode)Z.clickZoom?(f=I&&Z.doubleClickZoom?!0:!1,e=l.getClickZoomCoords3D(a,
Oa,L,W,f),Z.doubleClickZoom?I?(clearTimeout(I),I=null,l.zoomAndPanToView(e.x,e.y,e.z)):I=setTimeout(function(a){I=null;l.zoomAndPanToView(e.x,e.y,e.z)},Z.doubleClickDelay):window.setTimeout(function(){l.zoomAndPanToView(e.x,e.y,e.z)},1)):Z.clickPan&&l.zoomAndPanToView(e.x,e.y,Z.imageZ)}else Z.mousePan&&!hb&&l.updateView();Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1))}break;case "gesturestart":fd(a);
qb||(qb=window.setInterval(gd,hd));break;case "gesturechange":xc=Math.round(100*a.scale)/100;break;case "gestureend":qb&&(window.clearInterval(qb),Sb=!0,qb=null),Z.mousePan&&l.updateView()}}}function ac(a){null!==hb&&a&&(window.clearInterval(hb),hb=null);Rb=yc=zc=$a=null;ib=jb=yb=zb=0}function ed(a){if(!Z.animation||l.getZoom()!=Z.minZ){var b=parseFloat(A.left),c=parseFloat(A.top);if(Z.mouseIsDown||$a){var f=($a?yc:Fb.x)-wc.x,d=($a?zc:Fb.y)-wc.y,g=b-Rb.x,e=c-Rb.y;if(!(isNaN(f)||isNaN(d)||isNaN(g)||
isNaN(e)||0==f&&0==d&&0==g&&0==e)){var p=$a?Z.smoothPanGlide:1;a=$a?1:100;ib=Math.round((f-g)/(Z.smoothPanEasing*p)*a/a);jb=Math.round((d-e)/(Z.smoothPanEasing*p)*a/a);Z.mouseIsDown?(yb=ib,zb=jb):(Math.abs(ib)>Math.abs(yb)&&(ib=yb),Math.abs(jb)>Math.abs(zb)&&(jb=zb));b+=ib;c+=jb;f=La(b,c,Z.imageZ,Z.imageR,"container");A.left=f.x+"px";A.top=f.y+"px";ib-=b-f.x;jb-=c-f.y;c=f.x-ya;b=f.y-za;N&&ja&&($a||Z.mobileDevice||Math.abs(c)>V/2||Math.abs(b)>S/2)&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display");
$a&&0==Math.round(ib*a)/a&&0==Math.round(jb*a)/a&&($a=!1);Z.Navigator&&(a=l.calculateCurrentCenterCoordinates(f,Z.imageZ,Z.imageR),Z.Navigator.z658(a))}}else if(Z.mouseIsDown||null!==$a||0==ib||0==jb)ac(!0),l.updateView();else if(f=La(b+yb,c+zb,Z.imageZ,Z.imageR,"container"),yb=f.x-b,zb=f.y-c,0!=yb||0!=zb)yc=Fb.x+yb,zc=Fb.y+zb,$a=!0}}function fd(a){a=Z.Utils.event(a);a.preventDefault();xc=Math.round(100*a.scale)/100}function gd(a){if(Z.mousePan){a=ua(L,kb*xc);var b=Za(a);a!=Z.imageZ&&l.z633(b)}}var pc=
null,qc=null,Gb=0;"undefined"!==typeof a&&null!==a&&(Gb=a);var rb;rb="undefined"!==typeof b&&null!==b?b:Z.imagePath;var l=this,H=[],vb=parseInt(Z.Utils.getResource("z90"),10),Fc=8*vb,Gc=4*vb,Tb=0,Ea=parseInt(Z.Utils.getResource("z221"),10),Fa=parseInt(Z.Utils.getResource("z219"),10),Ac=parseFloat(Z.Utils.getResource("z218")),jd=Ac/2,Bb=parseInt(Z.Utils.getResource("z220"),10),Qc=1==Z.toolbarVisible?Z.toolbarH:0,Ob,N,Xa,ma,tb,T,A,ec,Y,R,ub,fc,ea,oa,qa,gc,Ra,Hb,Ib;r(Gb);var Ga,Aa=1,L=0,na=0,ja=!1,Ha=
0,hc=!1,W,kb,Ya,va,Ca=[],Ia=[],ta=[],Ja=[],Ka=[],Ab=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var sb=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var lb=[],wa=[],xa=[],Pa=[],cb=[],Nb=0,Mb=0,Kc=0,kc=0,lc=0,mc=0,oc=0,Rc,ic=0,jc=0,Zb=0,Cb=0,Xb=0,Eb=0,Db=0,Yb=0,mb=[],aa=[],Ba=[],ab=[],nb=[],bb=[],Jb=null,$b=0,cd=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),10),Lc=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),
10),Qa=[],sa=[],ob=[],Va=[],bd=new Z.NetConnector,dc=parseInt(Z.Utils.getResource("z81"),10),kd=parseInt(Z.Utils.getResource("z78"),10),Sc=parseInt(Z.Utils.getResource("z80"),10),Pb=parseInt(Z.Utils.getResource("z77"),10),Ha=Pb,Tc=parseInt(Z.Utils.getResource("z79"),10),Vb=parseInt(Z.Utils.getResource("z76"),10),Ub=parseInt(Z.Utils.getResource("z75"),10),Hc=null,Ic=null,Jc=null,ld=parseFloat(Z.Utils.getResource("z173UNCONVERTED"),10),md=null!==Z.panBuffer?Z.panBuffer:parseFloat(Z.Utils.getResource("z173"),
10),Ec="unconverted"!=Z.tileSource?md:ld,Pc=parseFloat(Z.Utils.getResource("z74"),10),ad=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER"),10),$c=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXFIREFOX"),10),Zc=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXIMAGESET"),10),V,S,cc,Lb,ga,ha,db,eb,ya,za,fb,gb,uc,vc,Ta,Ua;V=Z.viewerW;S=Z.viewerH;cc=Lb=0;S-=Qc;0==Z.toolbarPosition&&(Lb+=Qc);var I=null,Oa,xb,qb=null,xc=null,Sb=!1,hd=parseInt(Z.Utils.getResource("z122"),10),bc=Math.round(parseFloat(Z.Utils.getResource("z176"))*
Z.panSpeed),Ma=0,Na=0,ib=0,jb=0,yb=0,zb=0,$a=null,yc=null,zc=null,hb=null,wc=null,Rb=null,Fb=null,Kb=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(Kb/=2);var Sa=0,pb=null,Mc=0,tc=parseInt(Z.Utils.getResource("z238"),10),nc=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,Wb=null,nd=parseFloat(Z.Utils.getResource("z239")),Bc=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(Bc/=2);var wb=null,Qb=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var Cc,Uc,Vc,Wc,Xc,Dc,
Yc;if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);if(null!==Z.imageW&&null!==Z.imageH&&null!==Z.sourceMagnification)"undefined"!==typeof l.getStatus?e(Z.imageW,Z.imageH,
Ea,Fa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality):window.setTimeout(function(){e(Z.imageW,Z.imageH,Ea,Fa,null,null,null,null,Z.sourceMagnification,Z.focal,Z.quality)},100);else if(null!==Z.imageProperties){var od=Z.Utils.xmlConvertTextToDoc(Z.imageProperties);v(od)}else if("unconverted"==Z.tileSource)w(rb);else if(-1==Z.imagePath.indexOf("zSlidePath")&&-1==Z.imagePath.indexOf("zAnimationPath")){var pd=new Z.NetConnector;Q(rb,pd,Gb)}}this.setSizeAndPosition=function(a,b,c,d){C(a,b,
c,d)};this.syncViewportResize=function(a,b,c,d,g,e,p){l.setSizeAndPosition(Z.viewerW,Z.viewerH,0,0);l.resizeViewport(a,b,c,d)};this.resizeViewport=function(a,b,c,d){l.validateXYZDefaults();l.setView(a,b,c,d)};this.loadImageProperties=function(a,b,c){Q(a,b,c)};this.parseZIFHeader=function(a){m();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),c=Z.Utils.longValue(a,
b),d=1,g=null,p=null,n=null,q=null,X=null,w=null,w=2;0!=b;){for(g=0;g<c;g++)switch(p=b+8+20*g,Z.Utils.shortValue(a,p)){case 256:Ca[d-1]=Z.Utils.intValue(a,p+12);break;case 257:Ia[d-1]=Z.Utils.intValue(a,p+12);break;case 322:n=Z.Utils.intValue(a,p+12);break;case 323:q=Z.Utils.intValue(a,p+12);break;case 324:var ia=tierTileOffsetsCount[d-1]=Z.Utils.longValue(a,p+4);Ab[d-1]=Z.Utils.longValue(a,p+12);X+=ia;break;case 325:ia=tierTileByteCountsCount[d-1]=Z.Utils.longValue(a,p+4),sb[d-1]=1==ia?Z.Utils.intValue(a,
p+12):2==ia?Z.Utils.intValue(a,p+12)+","+Z.Utils.intValue(a,p+16):Z.Utils.longValue(a,p+12)}b=Z.Utils.longValue(a,b+20*c+8);c=Z.Utils.longValue(a,b);d++}g=Ca[0];p=Ia[0];Aa=d-1;Ca.reverse();Ia.reverse();tierTileOffsetsCount.reverse();Ab.reverse();tierTileByteCountsCount.reverse();sb.reverse();!isNaN(g)&&0<g&&!isNaN(p)&&0<p&&!isNaN(n)&&0<n&&!isNaN(q)&&0<q&&0<X?"undefined"!==typeof l.getStatus?e(g,p,n,q,X,w,null,null,null,null,null):h(g,p,n,q,X,w,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?
Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=c&&(tierTileOffsetChunks[c].chunk=a,J(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=c&&(tierTileByteCountChunks[c].chunk=a,J(b,"byteCount"))};this.parseZIFImage=function(a,b,c){a="data:image/jpeg;base64,"+
Z.Utils.encodeBase64(a);var d;"image-display"==c?d=fa:"image-backfill"==c?d=la:"navigator"==c&&(d=Z.Navigator.z556);b=Z.Utils.createCallback(null,d,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a){v(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);var b=parseFloat(Z.Utils.getResource("z143")),c=parseFloat(Z.Utils.getResource("z144")),d=parseFloat(Z.Utils.getResource("z145")),g=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),e=parseFloat(Z.Utils.getResource("z163"));
a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;c=isNaN(c)?null:c;d=isNaN(d)?null:d;g=isNaN(g)?null:g;e=isNaN(e)?null:e;a=isNaN(a)?null:a;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=c),Z.parameters.zInitialZoom||(Z.initialZ=d),Z.parameters.zInitialRotation||(Z.initialR=g),Z.parameters.zMinZoom||(Z.minZ=e),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=b,Z.initialY=c,Z.initialZ=d,Z.initialR=g,Z.minZ=e,Z.maxZ=a);null===Z.initialX&&(Z.initialX=
Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=l.z468(0);Z.fillZ=l.calculateZoomToFill(0);b=l.getStatus("initialized")?l.getRotation():Z.initialR;a=l.z468(b);b=l.calculateZoomToFill(b);1<Z.fitZ&&(null!==Z.maxZ?Z.fitZ>Z.maxZ&&(Z.fitZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fitZ=1));1<Z.fillZ&&(null!==Z.maxZ?Z.fillZ>Z.maxZ&&(Z.fillZ=Z.maxZ):"unconverted"==Z.tileSource&&(Z.fillZ=1));null===Z.minZ||-1==Z.minZ?Z.minZ=Z.fitZ:0==Z.minZ&&(Z.minZ=Z.fillZ);if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=
1;null===Z.initialZ||-1==Z.initialZ?Z.initialZ=a:0==Z.initialZ&&(Z.initialZ=b);Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getViewW=function(){return V};this.getViewH=function(){return S};this.getDisplayW=function(){return ga};this.getDisplayH=function(){return ha};this.getImagePath=function(){return rb};this.setImagePath=function(a){rb=a};this.getViewportID=function(){return Gb};this.getTierCount=function(){return Aa};this.getTileW=function(){return Ea};this.getTileH=
function(){return Fa};this.getTierCurrent=function(){return L};this.getTierBackfill=function(){return na};this.getTierBackfillDynamic=function(){return ja};this.getTierBackfillOversize=function(){return Ha};this.getTierScale=function(){return W};this.getX=function(){var a=parseFloat(A.left)-ya,b=l.getZoom();return pc-a/b};this.getY=function(){var a=parseFloat(A.top)-za,b=l.getZoom();return qc-a/b};this.getZoom=function(){return ua(L,W)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=
function(){return Ac};this.getTiersScaleDownMax=function(){return jd};this.getTilesCacheMax=function(){return Bb};this.getTierWs=function(){return Ca.join(",")};this.getTierHs=function(){return Ia.join(", ")};this.getTierTileCounts=function(){return Ka.join(", ")};this.getTilesToLoad=function(){return Nb};this.getTilesLoadingNames=function(){return""==aa.join(", ")?"Current view loading complete":aa.join(", ")};this.getTilesToDraw=function(){return Eb};this.getConstrainPan=function(a){return Z.constrainPan};
this.setConstrainPan=function(a){Z.constrainPan=0!=a;Z.constrainPanStrict=2==a?!0:!1;Z.constrainPan&&l.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=a};this.setVisibility=function(a){a=a?"inline-block":
"none";Ob&&!Xa&&(Xa=Ob.style);Xa&&(Xa.display=a);tb&&!A&&(A=tb.style);A&&(A.display=a)};this.z619=function(b){b||(ca(Ub,xa),Hc=!0);(!Z.imageSet||a==Z.imageSetStart||b)&&Aa>Tc&&(ca(Vb,xa),Ic=!0,Aa>Sc&&(ca(Pb,xa),Jc=!0),l.setStatus("backfillPrecached",!0));xa.sort();xa=Z.Utils.arrayUnique(xa);lb=xa.slice(0);l.traceDebugValues("tilesBackfillToPrecache",null,lb.length);ka(xa,la,"simple","image-backfill")};this.updateView=function(b){if("undefined"===typeof a||null===a)a=0;var c=Z.mouseIsDown||Z.buttonIsDown||
Z.keyIsDown||Z.mouseWheelIsDown,d=W!=kb||l.getZoom()!=Z.imageZ||Z.imageZ!=Z.priorZ,f=parseFloat(A.left)!=ya||parseFloat(A.top)!=za||l.getX()!=Z.imageX||l.getY()!=Z.imageY,g=Z.fullViewPrior;if(d||f||g||"undefined"!==typeof b&&b&&(!c||Z.animation)){if(!Z.imageSet||!Z.Viewer.getStatus("ready")||a>Z.viewportCurrentID-1&&a<Z.viewportCurrentID+1){da();var e=!1;if(b||parseFloat(oa.width)!=ea.width){if(Z.useCanvas){oa.width=ea.width+"px";oa.height=ea.height+"px";oa.left="0px";oa.top="0px";qa.restore();qa.save();
try{qa.scale(W,W)}catch(p){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE")),console.log("In function z630 scaling canvas:  "+p)}Y&&(ja?(R.width=Y.width+"px",R.height=Y.height+"px",R.left=Ta+"px",R.top=Ua+"px",ub.restore(),ub.save(),ub.scale(Ya,Ya)):(R.width=fb+"px",R.height=gb+"px",R.left=Ta+"px",R.top=Ua+"px"))}e=!0}if(b||parseFloat(A.left)!=ya||parseFloat(A.top)!=za)e=parseFloat(A.left)-ya,c=parseFloat(A.top)-za,0!=Z.imageR&&(c=Z.Utils.rotatePoint(e,c,Z.imageR),
e=c.x,c=c.y),A.left=ya+"px",A.top=za+"px",ja||(Ta=parseFloat(R.left)+e,Ua=parseFloat(R.top)+c,R.left=Ta+"px",R.top=Ua+"px"),g=l.getZoom(),Z.imageX=pc=Z.imageX-e/g,Z.imageY=qc=Z.imageY-c/g,e=!0;e&&(G(ea,L,Ba,"centerOut",!1,"1a. Updating view: resetting display positions"),ja&&G(Y,na,wa,"simple",!1,"1b. Updating view: resetting backfill positions"));e=!1;if("undefined"!==typeof b&&b||W!=kb||l.getZoom()!=Z.imageZ||!l.getStatus("initialized")){W!=kb&&(Z.imageZ=l.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=
Z.minZ);Z.imageZ>Z.maxZ&&(Z.imageZ=Z.maxZ);g=Ac;for(c=Aa;g/2>=Z.imageZ;)c--,g/=2;c=0>c-1?0:c-1;g=ra(c,Z.imageZ);if(c!=L||g!=W)Z.useCanvas&&(qa.restore(),qa.save(),qa.scale(g,g)),L!=c&&(hc=!0),L=c,W=g;kb=W;if("unconverted"!=Z.tileSource){ja=!1;L>dc?(na=L-kd,ja=!0):na=L>Sc?Pb:L>Tc?Vb:Ub;tierBackfillScalePrior=Ya=ra(na,Z.imageZ);var c=Ca[na],g=Ia[na],n=Z.imageX*Z.imageZ,h=Z.imageY*Z.imageZ;ja?(c=Pc,fb=ga*c,gb=ha*c,Ta=-(ga/c),Ua=-(ha/c),uc=db*c,vc=eb*c,Y.width=fb,Y.height=gb,R.width=Y.width+"px",R.height=
Y.height+"px",R.left=Ta+"px",R.top=Ua+"px",Z.useCanvas&&(N&&(va=ra(Ha,Z.imageZ),ma.restore(),ma.save(),ma.scale(va,va),0!=Z.imageR&&ma.rotate(Z.imageR*Math.PI/180)),ub.restore(),ub.translate(uc,vc),ub.save(),ub.scale(Ya,Ya))):(fb=c*Ya,gb=g*Ya,Ta=db-n,Ua=eb-h,Y.width=c,Y.height=g,Z.useCanvas&&(R.width=fb+"px",R.height=gb+"px"),R.left=Ta+"px",R.top=Ua+"px");G(Y,na,wa,"simple",!1,"2. Updating view: changing tier - backfill")}!b&&0<Bb&&(e=!0)}else l.traceDebugValues("updateView-noChange");"unconverted"!=
Z.tileSource&&ja?U(!0):N&&Z.Utils.clearDisplay(N)}Z.imageSet&&a!=Z.viewportCurrentID?(l.setStatus("displayLoaded",!0),l.setStatus("displayDrawn",!0)):("unconverted"!=Z.tileSource?(U(),G(ea,L,null,"centerOut",e,"3. Updating view: prior to loading of any new tiles")):"undefined"!==typeof Ga&&(b=-Z.imageX,e=-Z.imageY,Z.Utils.clearDisplay(ea),qa.drawImage(Ga,b,e)),0<aa.length&&ka(aa,fa,"centerOut","image-display"),l.syncViewportRelated());f&&Z.Utils.validateCallback("viewPanned");d&&Z.Utils.validateCallback("viewZoomed");
(f||d)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){Ra&&Hb&&Ib&&(Ra.width=ea.width,Ra.height=ea.height,Hb.width=oa.width,Hb.height=oa.height,Hb.left=oa.left,Hb.top=oa.top,Ib.restore(),Ib.save(),Ib.translate(db,eb),Ib.scale(W,W))};this.loadUnconvertedImage=function(a){w(a)};this.getUnconvertedImage=function(){return Ga};this.createUnconvertedImageThumbnail=function(){if(Z.useCanvas){if("undefined"!==typeof Ga){var a=null,a=150/Z.imageW,b=Z.Utils.createContainerElement("canvas",
"tempCanvas","inline-block","absolute","visible",Z.imageW*a+"px",Z.imageH*a+"px","0px","0px","none","0px","transparent none","0px","0px","normal"),c=b.getContext("2d");try{c.scale(a,a),c.drawImage(Ga,0,0)}catch(d){console.log("In function initializeViewportContinue scaling canvas:  "+d)}a=new Image;a.src=b.toDataURL("image/jpeg",Z.saveImageCompression);return a}window.setTimeout(function(){createUnconvertedImageThumbnail()},100)}};this.formatTilePath=function(a,b,c,d){var g;if("ZoomifyImageFile"==
Z.tileSource){g="offsetLoading";var e="loading",p="loading",n;if(1==tierTileOffsetsCount[a])e=Ab[a];else{var h=new O(a,b,c),q=h.chunkID+","+a+","+b+","+c+","+d+",offset";n=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",h.chunkID);-1==n?(l.traceDebugValues("z532",h.chunkID+","+a+","+b+","+c+","+d),-1==Z.Utils.arrayIndexOf(sa,q)&&(sa[sa.length]=q),tierTileOffsetChunks[tierTileOffsetChunks.length]={chunkID:h.chunkID,chunk:"loading"},n=new Z.NetConnector,n.loadByteRange(rb,h.chunkStart,
h.chunkEnd,"offset",null,h.chunkID)):"loading"==tierTileOffsetChunks[n].chunk?-1==Z.Utils.arrayIndexOf(sa,q)&&(sa[sa.length]=q):"loading"!=tierTileOffsetChunks[n].chunk&&(n=tierTileOffsetChunks[n].chunk,e=Z.Utils.longValue(n,h.offsetStartInChunk))}1==tierTileByteCountsCount[a]?p=sb[a]:(n=b+c*ta[a],2==tierTileByteCountsCount[a]?(a=sb[a],p=0==n?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):(h=new B(a,b,c),a=h.chunkID+","+a+","+b+","+c+","+d+",byteCount",n=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,
"chunkID",h.chunkID),-1==n?(-1==Z.Utils.arrayIndexOf(sa,a)&&(sa[sa.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:h.chunkID,chunk:"loading"},n=new Z.NetConnector,n.loadByteRange(rb,h.chunkStart,h.chunkEnd,"byteCount",null,h.chunkID)):"loading"==tierTileByteCountChunks[n].chunk?-1==Z.Utils.arrayIndexOf(sa,a)&&(sa[sa.length]=a):"loading"!=tierTileByteCountChunks[n].chunk&&(n=tierTileByteCountChunks[n].chunk,p=Z.Utils.intValue(n,h.bcStartInChunk))));"loading"==e||isNaN(e)||
"loading"==p||isNaN(p)||(g=rb+"?"+e.toString()+","+p.toString())}else if("ZoomifyImageFolder"==Z.tileSource){g=c*ta[a]+b;for(e=0;e<a;e++)g+=Ka[e];a=rb+"/TileGroup"+Math.floor(g/256)+"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==Bb)a=Z.Utils.cacheProofPath(a);g=a}return g};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var g=a.type;if("undefined"===typeof c||null===c)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),
"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=pa(c.x,c.y),d=X(a.x,a.y,b))}return d};this.getClickZoomCoords3D=function(a,b,c,d,g){var e=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=pa(b.x,b.y);b=X(b.x,b.y,Z.imageZ);var p=ua(c,d);a=a.altKey;g?a?p=Z.fitZ:(g=ra(c,Z.fitZ),d-g<e?p=Z.fitZ:d>1+e?p=ua(c,1):0<c?p=
ua(c-1,1):"unconverted"==Z.tileSource&&(p=Z.fitZ)):a?p=1:d<1-e?p=ua(c,1):c<Aa-1&&(p=ua(c+1,1));return new Z.Utils.Point3D(b.x,b.y,p)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(A.left),parseFloat(A.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);if("undefined"===typeof b||null===b)b=l.getZoom();var d=(a.x-ya)/b;a=(a.y-za)/b;var g,e;switch(c){case 0:g=Z.imageX-d;e=Z.imageY-a;break;case 90:g=Z.imageX-a;
e=Z.imageY+d;break;case 180:g=Z.imageX+d;e=Z.imageY+a;break;case 270:g=Z.imageX+a,e=Z.imageY-d}return new Z.Utils.Point(g,e)};this.z542=function(a,b){if("undefined"===typeof a||null===a)a=L;if("undefined"===typeof b||null===b)b=!1;return new x(l.z541(b),a)};this.z541=function(a){var b=parseFloat(A.left)-ya,c=parseFloat(A.top)-za;if(Z.useCanvas)var d=parseFloat(A.width)/T.width,b=b/d,c=c/d;d=l.getZoom();0!=b&&(b/=d);0!=c&&(c/=d);var b=Z.imageX-b,c=Z.imageY-c,e,p,n;a?(a=-(V/2),e=V/2,p=-(S/2),n=S/2):
(a=-(ga/2),e=ga/2,p=-(ha/2),n=ha/2);return new g(b,c,a,e,p,n,d)};this.HotspotsAllBoundingBoxInPixels=function(){for(var a=new HotspotContext,b=Z.imageCenterX,c=Z.imageCenterX,d=Z.imageCenterY,g=Z.imageCenterY,e=0,p=hotspots.length;e<p;e++){var n=hotspots[e],l=new HotspotDimensions(n,a,null,!0),h=n.x-l.w/2,q=n.x+l.w/2,X=n.y-l.h/2,n=n.y+l.h/2;h<b&&(b=h);q>c&&(c=q);X<d&&(d=X);n>g&&(g=n)}a=parseInt(Z.Utils.getResource("DEFAULT_SAVEIMAGELABELMARGIN"),10);b-=a;d-=a;c+=a;g+=a;this.l=b;this.r=c;this.t=d;
this.b=g;this.x=b+(c-b)/2;this.y=d+(g-d)/2};this.z468=function(a){var b=Z.imageW/Z.imageH>V/S?V/Z.imageW:S/Z.imageH;if(90==a||270==a)b=Z.imageW/Z.imageH>V/S?V/Z.imageH:S/Z.imageW;return b};this.calculateZoomToFill=function(a){var b=Z.imageW/Z.imageH>V/S?S/Z.imageH:V/Z.imageW;if(90==a||270==a)b=Z.imageW/Z.imageH>V/S?S/Z.imageW:V/Z.imageH;return b};this.calculateZoomForResize=function(a,b,c,d,g){var e=a,p=Z.imageW*a,n=Z.imageH*a;b=d/b;c=g/c;p<d&&n<g?e=a:p==d&&n<g?e=-1:p<d&&n==g?e=-1:p>d&&n<=g?e=a*b:
p<=d&&n>g?e=a*c:p>d&&n>g&&(d=1,1<=b&&1<=c?d=b>c?b:c:1>=b&&1>=c&&(d=b<c?b:c),e=a*d);e<Z.minZ&&(e=Z.minZ);e>Z.maxZ&&(e=Z.maxZ);return e};this.z482=function(a,b){return ua(a,b)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=La(a.x,a.y,Z.imageZ,b,"image");a=Z.imageY;var d=c.y,c=dX=Z.imageX-c.x;a=dY=a-d;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;d=a+za;A.left=b+ya+"px";A.top=d+"px";N&&ja&&(Z.mobileDevice||Math.abs(b)>V/2||
Math.abs(a)>S/2)&&G(N,Ha,wa,"simple",!1,"Updating backfill oversize display")};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(H,"state",a);return-1==a?!1:H[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(H,"state",a);-1==d?(c=b,H[H.length]={state:a,status:b}):(!H[d].status&&b&&(c=!0),H[d].status=b);c&&(Z.Utils.validateCallback(a+"Viewport"),Z.Viewer.validateViewerStatus(a))};this.traceDebugValues=function(a,b,c,d){c="undefined"!==typeof c&&null!==c?
c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":ic=c;Xb=Cb=Zb=jc=0;Eb=c;Db=0;tilesTimeStart=(new Date).getTime();Yb=0;window.clearTimeout(Jb);Jb=null;Jb=window.setTimeout(ia,Lc);break;case "tilesInCache":jc=c;break;case "z581-image-display":Zb+=1;break;case "onTileLoad":Cb+=1;Db=((new Date).getTime()-c)/1E3;Yb=Cb/Db;break;case "z507":a=Z.Utils.arrayIndexOf(mb,b);-1!=a&&(mb.splice(a,1),Xb+=1,--Eb);break;case "tilesBackfillToPrecache":Kc=c;break;case "onTileBackfillPrecache":kc+=1;break;case "tilesBackfillToDisplay":Rc=
lc=c;break;case "z599":mc+=1;break;case "displayBackfillTile":a=Z.Utils.arrayIndexOf(lb,b),-1!=a&&(lb.splice(a,1),oc+=1,--Rc)}};this.updateProgress=function(a,b){var c=Z,d;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-b/a*100),d=Math.round(d/10));c.updateViewPercent=d;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.setDrawingColor=function(a,b){var c=Z.annotationFileShared?
"0":Gb.toString(),d;switch(a){case "buttonColor0"+c:d="#FFFFFF";break;case "buttonColor1"+c:d="#FFFF00";break;case "buttonColor2"+c:d="#00FFFF";break;case "buttonColor3"+c:d="#800080";break;case "buttonColor4"+c:d="#008000";break;case "buttonColor5"+c:d="#FF0000";break;case "buttonColor6"+c:d="#0000FF";break;case "buttonColor7"+c:d="#000000"}captionTextColor=ctrlPtStrokeColor=lineStrokeColor=d;c="#FFFFFF"==d?"#000000":"#FFFFFF";b||null===hotspotCurrentID||1!=Z.editMode||"addLabel"!=Z.editing&&"editLabel"!=
Z.editing||(l.modifyHotspot(hotspotCurrentID,"textColor",d,!0,!0),l.modifyHotspot(hotspotCurrentID,"backColor",c,!0,!0),l.modifyHotspot(hotspotCurrentID,"lineColor",d,!1,!0))};this.setView=function(a,b,c,d,g,e){y(a,b,c,d,g,e)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Sa&&(Sa-=Kb);break;case "in":0>=Sa&&(Sa+=Kb);break;case "stop":Sa=0}Z.zooming=0==Sa?"stop":0<Sa?"in":"out";0!=Sa?pb||(pb=window.setTimeout(rc,tc)):(Oc(),l.updateView())}};this.pan=function(a){if("horizontalStop"!=
a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=Ma&&(Ma+=bc);break;case "up":0>=Na&&(Na+=bc);break;case "down":0<=Na&&(Na-=bc);break;case "right":0<=Ma&&(Ma-=bc);break;case "horizontalStop":Ma=0;break;case "verticalStop":Na=0;break;case "stop":Na=Ma=0}Z.panningX=0==Ma?"stop":0<Ma?"left":"right";Z.panningY=0==Na?"stop":0<Na?"up":"down";ua(L,1);ua(L,1);0!=Ma||0!=Na?pb||(pb=window.setTimeout(rc,tc)):(Oc(),l.updateView())}};this.zoomAndPanToView=function(a,b,c,
d,g,e,p){l.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof g||null===g)g=nd;if("undefined"===typeof e||null===e)e=Bc;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;
if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=La(a,b,c,d,"image");a=b.x;b=b.y;c=Za(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactivityOff=!0,Qb=0,Nc(a,b,c,d,g,e,p)}};this.zoomAndPanAllStop=
function(a,b){Z.interactivityOff||(wb&&wb&&(window.clearTimeout(wb),wb=null),Z.tourPlaying&&b&&(l.tourStop(),a=!1),Z.slideshowPlaying&&b&&(l.slideshowStop(),a=!1),Z.smoothPan&&null!==hb&&(Z.mouseIsDown||ac(!0),a=!0),a||l.updateView())};this.syncViewportRelated=function(a,b,c,d,g,e){if("undefined"==typeof c||c)Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(a=l.getZoom(),Z.Toolbar.syncSliderToViewportZoom(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom");("undefined"==typeof d||d)&&Z.Navigator&&
Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport()};this.z633=function(a,b){sc(a,b)&&l.syncViewportRelated()};this.reset=function(a){a?l.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):l.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);da(!0)};this.toggleConstrainPan=function(a){Z.constrainPan="undefined"!==typeof a&&null!==a?a:!Z.constrainPan;if(Z.constrainPan){a=parseFloat(oa.left);var b=parseFloat(oa.top);a=La(a,b,Z.imageZ,Z.imageR,"container");A.left=a.x+"px";A.top=
a.y+"px";l.updateView()}};this.toggleSmoothPan=function(){ac();Z.smoothPan=!Z.smoothPan};this.toggleBackfill=function(){var a=document.getElementById("viewportBackfillDisplay"+Gb.toString());a&&(a=a.style,a.display="none"==a.display?"inline-block":"none")};this.toggleDisplay=function(){var a=document.getElementById("viewportDisplay"+Gb.toString());a&&(oa=a.style,oa.display="none"==oa.display?"inline-block":"none")};this.toggleFullViewMode=function(a,b){Z.ToolbarDisplay&&Z.Toolbar.show(!1);var c=null,
d=null;Z.fullViewPrior=Z.fullView;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var g=document.body.style,e=document.documentElement.style,p=Z.ViewerDisplay.style,d=Z.Utils.getElementStyle(Z.pageContainer);Z.fullView?(Uc=g.width,Vc=g.height,Wc=g.overflow,Xc=e.overflow,Dc=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(g.backgroundColor)&&"transparent"!=g.backgroundColor?g.backgroundColor:Z.Utils.getResource("z120"),Yc=
p.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(Cc=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),d=Z.Utils.getScreenSize()):(d=Z.Utils.getWindowSize(),Z.mobileDevice?(g.width=d.x,g.height=d.y):(g.width="100%",g.height="100%")),c=d.x,d=d.y,g.overflow="hidden",e.overflow="hidden",p.backgroundColor=Dc,p.position="fixed",p.zIndex="99999999"):(g.overflow=Wc,e.overflow=Xc,p.backgroundColor=Dc,p.position="relative",p.zIndex=Yc,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,
!1,b),g.width=Uc,g.height=Vc,c=parseFloat(d.width),d=parseFloat(d.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(d)&&(d=Z.ViewerDisplay.clientHeight));Z.autoResize||(Z.initialFullPage&&l.setSizeAndPosition(c,d),g=Z.viewportCurrent.calculateZoomForResize(Z.viewportCurrent.getZoom(),Z.viewerW,Z.viewerH,c,d),Z.Viewer.resizeViewer(c,d,g));c=Z.fullView;g=document.getElementById("buttonFullView");e=document.getElementById("buttonFullViewExit");g&&e&&(g.style.display=c?"none":"inline-block",e.style.display=
c?"inline-block":"none");Z.fullViewPrior=!1};this.fullScreenEscapeHandler=function(a){Cc?Cc=!1:l.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a){Z.mouseWheelIsDown=!0;Z.mouseWheelCompleteTimer&&window.clearTimeout(Z.mouseWheelCompleteTimer);Z.mouseWheelCompleteTimer=window.setTimeout(Z.Viewer.z586,Z.mouseWheelCompleteDuration);if("zoom"==Z.sliderFocus){var b=l.z482(L,W*(1+(0<a?Kb:-Kb)));constrainedZ=Za(b);constrainedZ!=Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",l.z633(constrainedZ))}}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(B);B=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible?d(a):e(!a)}function d(a){K&&(K.display=a?"inline-block":"none")}function e(a){Z.ToolbarMinimized=a;if(K){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),d=document.getElementById("buttonMinimize"),e=document.getElementById("buttonExpand"),
h=document.getElementById("logoDivider"),q=0;e&&!fa&&(q=parseFloat(e.style.left)+parseFloat(e.style.width)+4);var w=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),d&&e&&!fa&&(h&&(h.style.display="none"),d.style.display="none",e.style.display="inline-block"),K.width=q+"px",c&&(c.style.width=q+"px")):(b&&(b.style.display="inline-block"),d&&e&&!fa&&(h&&(h.style.display="inline-block"),d.style.display="inline-block",e.style.display="none"),K.width=w+"px",c&&(c.style.width=w+"px"))}}function h(a){if("undefined"!==
typeof trszS&&"undefined"!==typeof btszS){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width)-b;btszS.left=a*c+b+"px"}}function m(a){"undefined"!==typeof btsZ&&(D=!0,a=Z.Utils.getMousePosition(a),btsZ.mouseXPrior=a.x,btsZ.mouseYPrior=a.y)}function r(){if("undefined"!==typeof trszS&&"undefined"!==typeof btsZ&&"undefined"!==typeof btszS){var b=parseFloat(trszS.left),c=parseFloat(trszS.left)+parseFloat(trszS.width)-parseFloat(btszS.width),
d=parseFloat(btszS.left)+(O.x-btsZ.mouseXPrior);d<b?d=b:d>c?d=c:btsZ.mouseXPrior=O.x;btszS.left=d+"px";b=Z.minZ+(d-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function t(b){if(b=Z.Utils.event(b)){var c=b.type,d=Z.Utils.target(b);if(d){var e=d.parentNode;if(e){var h=e;tbID=e.id}}d=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&"buttonAudioOn"!=tbID&&"buttonAudioMuted"!=tbID&&a.zoomAndPanAllStop(!1,!0);if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==
tbID||"buttonRotateCounterwise"==tbID)&&(!d||"[object HTMLSelectElement]"!=d&&"[object HTMLOptionElement]"!=d)&&!Z.Utils.isRightMouseButton(b)){Z.touchSupport&&b.preventDefault();if(tbID&&-1!=tbID.indexOf("viewportContainer")||D)D&&(e=document.getElementById("buttonSliderZoom")),e&&(tbID=e.id);var d=e,q=c;if(-1!=d.id.indexOf("button")&&-1==d.id.indexOf("buttonContainer")){var w=d.firstChild,F=d.childNodes[1],p=d.childNodes[2];if(w&&F&&p)if(w=w.style,F=F.style,p=p.style,w.visibility=F.visibility=p.visibility=
"hidden","mouseover"==q&&"buttonSliderZoom"==d.id&&D)p.visibility="visible";else if("mouseover"==q||"mouseup"==q)F.visibility="visible";else if("mousedown"==q||"mousemove"==q||"touchstart"==q||"MSPointerDown"==q)p.visibility="visible";else if("mouseout"==q||"touchend"==q||"touchcancel"==q||"MSPointerUp"==q)w.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID)if(Z.Utils.removeEventListener(e.childNodes[0],"mouseover",
t),Z.Utils.addEventListener(e.childNodes[1],"mousedown",t),Z.Utils.addEventListener(e.childNodes[1],"mouseout",t),D&&h&&Z.Utils.addEventListener(h.childNodes[0],"mouseup",t),"buttonZoomIn"==tbID||"buttonSliderZoom"==tbID||"buttonZoomOut"==tbID)Z.sliderFocus="zoom";else{if("buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"buttonImageSetNext"==tbID)Z.sliderFocus="imageSet"}else Z.Utils.addEventListener(e.childNodes[0],"mouseout",t),Z.sliderFocus="trackSliderImageSet"==tbID?"imageSet":"zoom";
break;case "mousedown":Z.buttonIsDown=!0;!Z.fullView&&document.activeElement&&document.activeElement.blur();"trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID&&(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",t),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",t),Z.Utils.addEventListener(e.childNodes[2],"mouseup",t),Z.Utils.addEventListener(e.childNodes[2],"mouseout",t),"buttonSliderZoom"==tbID&&(m(b),Q(b),Z.Utils.addEventListener(document,"mousemove",Q),ba||(ba=window.setInterval(r,
ka)),Z.Utils.addEventListener(document,"mouseup",t)),"buttonSliderImageSet"==tbID&&(z652ImageSet(b),z650ImageSet(b),Z.Utils.addEventListener(document,"mousemove",z650ImageSet),x||(x=window.setInterval(sliderSlideImageSet,M)),Z.Utils.addEventListener(document,"mouseup",t)));a&&C(b,tbID);break;case "mouseup":Z.buttonIsDown=!1;Z.Utils.removeEventListener(e.childNodes[2],"mouseup",t);Z.Utils.removeEventListener(e.childNodes[2],"mouseout",t);Z.Utils.addEventListener(e.childNodes[1],"mousedown",t);Z.Utils.addEventListener(e.childNodes[1],
"mouseout",t);D&&h&&Z.Utils.removeEventListener(h.childNodes[0],"mouseup",t);a&&C(b,tbID);break;case "mouseout":if("trackSliderZoom"!=tbID&&"trackSliderImageSet"!=tbID){if(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",t),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",t),Z.Utils.addEventListener(e.childNodes[0],"mouseover",t),a&&C(b,tbID),"buttonImageSetPrior"==tbID||"buttonSliderImageSet"==tbID||"trackSliderImageSet"==tbID||"buttonImageSetNext"==tbID||"buttonZoomIn"==tbID||"buttonSliderZoom"==
tbID||"buttonZoomOut"==tbID)Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom"}else Z.Utils.removeEventListener(e.childNodes[0],"mouseout",t),Z.sliderFocus=2==Z.mouseWheel?"imageSet":"zoom";break;case "touchstart":"buttonSliderZoom"==tbID&&(m(b),v(b),Z.Utils.addEventListener(document,"touchmove",v),ba||(ba=window.setInterval(r,ka)));"buttonSliderImageSet"==tbID&&(z652ImageSet(b),z654ImageSet(b),Z.Utils.addEventListener(document,"touchmove",z654ImageSet),x||(x=window.setInterval(sliderSlideImageSet,M)));
Z.Utils.addEventListener(e,"touchend",t);Z.Utils.addEventListener(e,"touchcancel",t);a&&C(b,tbID);break;case "touchend":Z.Utils.addEventListener(e,"touchstart",t);a&&C(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(e,"touchstart",t);a&&C(b,tbID);break;case "MSPointerDown":"buttonSliderZoom"==tbID&&(m(b),v(b),Z.Utils.addEventListener(document,"MSPointerMove",v),ba||(ba=window.setInterval(r,ka)));"buttonSliderImageSet"==tbID&&(z652ImageSet(b),z654ImageSet(b),Z.Utils.addEventListener(document,
"MSPointerMove",z654ImageSet),x||(x=window.setInterval(sliderSlideImageSet,M)));Z.Utils.addEventListener(e,"MSPointerUp",t);a&&C(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(e,"MSPointerDown",t),a&&C(b,tbID)}}}function C(b,c){var d=b.type,e=Z.annotationFileShared?"0":U;if("mousedown"==d||"touchstart"==d){var h=b.altKey,d=document.activeElement.id;!Z.Utils.stringValidate(d)||d!="poiNameTextElement"+U&&d!="labelNameTextElement"+U&&"captionTextElement"!=d&&"commentTextElement"!=d&&"tooltipTextElement"!=
d&&"clickURLTextElement"!=d&&d!="noteNameTextElement"+U&&d!="noteTextElement"+U||document.getElementById(d).blur();switch(c){case "buttonMinimize":P.minimize(!0);Z.Navigator&&Z.Navigator.setVisibility(!1);break;case "buttonExpand":P.minimize(!1);Z.Navigator&&Z.Navigator.setVisibility(!0);break;case "buttonZoomOut":h||a.zoom("out");break;case "trackSliderZoom":"undefined"!==typeof trsZ&&"undefined"!==typeof trszS&&(h=Z.Utils.getElementPosition(trsZ),h=Z.Utils.getMousePosition(b).x-h.x,d=parseFloat(trszS.width),
h=Z.minZ+(h-0)/(d-0)*(Z.maxZ-Z.minZ),h<Z.minZ+.1&&(h=Z.minZ),h>Z.maxZ-.1&&(h=Z.maxZ),d=h-a.getZoom(),Z.zooming=0<d?"in":0>d?"out":"stop",a.z633(h),Z.zooming="stop",a.updateView());break;case "buttonZoomIn":h||a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(h);break;case "buttonHelp":Z.Utils.showHelp(Z.Utils.getResource("z32"))}}else if("mouseup"==
d||"touchend"==d||"touchcancel"==d)if("buttonSliderZoom"==c||D){ba&&(window.clearInterval(ba),ba=null);D&&(Z.Utils.removeEventListener(document,"mousemove",Q),Z.Utils.removeEventListener(document,"mouseup",t),Z.Utils.removeEventListener(document,"touchmove",v));h=Z.ToolbarDisplay.childNodes;d=0;for(e=h.length;d<e;d++){var q=h[d],w=q.id;if(w&&-1!=w.indexOf("button"))if("buttonContainer"!=w&&"buttonContainerImageFilter"!=w)Z.Utils.setButtonDefaults(q);else for(var q=q.childNodes,w=0,m=q.length;w<m;w++){var p=
q[w],ia=p.id;ia&&-1!=ia.indexOf("button")&&Z.Utils.setButtonDefaults(p)}}D=!1;Z.zooming="stop";a.updateView()}else"buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?(a.pan("horizontalStop"),"buttonPanLeft"==c&&h&&a.toggleSmoothPan()):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):c=="buttonLabelScaleDown"+e||c=="buttonLabelScaleUp"+e?a.labelScale("stop"):"buttonFullView"==c?a.toggleFullViewMode(!0):"buttonFullViewExit"==c&&a.toggleFullViewMode(!1);
else"mouseout"==d&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"!=c&&"buttonPanDown"!=c||a.pan("verticalStop"))}function Q(a){O=new Z.Utils.Point(a.clientX,a.clientY)}function v(a){(a=Z.Utils.getFirstTouch(a))&&(O=new Z.Utils.Point(a.pageX,a.pageY))}var P=this,ca=!1,U=a.getViewportID().toString();Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));
var G,K,w=[],q=[],F=[],ka=parseInt(Z.Utils.getResource("z205ZOOM"),10),D=!1,ba=null,O=null,B=null,J=null,Wa,Da,fa,la,E,M=parseInt(Z.Utils.getResource("z205IMAGESET"),10),x=null;this.getInitialized=function(){return ca};this.getSkinArray=function(){return w};this.getSkinSizes=function(){return F};this.show=function(a){c(a)};this.setVisibility=function(a){d(a)};this.minimize=function(a){e(a)};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};
this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};this.updateProgress=function(a,c){if(Z.progressVisible){B&&window.clearInterval(B);var d,e=document.getElementById("progressTextBoxCenteredDiv");e&&(e=e.firstChild)&&(0==a||0==c?(e.nodeValue="llllllllll",B=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(d=Math.round(100-c/a*100),d=Math.round(d/10),e.nodeValue=Z.Utils.stringMultiply("l",d)))}};this.parseSkinXML=function(b){Z.skinMode=
b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;var d,e;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,e="SIZESSTANDARD"):(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,e="SIZESLARGE");var n=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof n&&null!==n&&(J=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);
n=[];n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERW").nodeValue);n[n.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);
n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSW").nodeValue);n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSH").nodeValue);
n[n.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var m,r,D;e="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.screensaver||Z.tourPath||Z.slidePath||Z.imageSetPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderZoomVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");
null!==m&&(r=m.nodeValue);m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+e.toString());null!==m&&(D=m.nodeValue);if("undefined"!==typeof r&&Z.Utils.stringValidate(r)&&"undefined"!==typeof D&&Z.Utils.stringValidate(D)){r=!1;D=0;for(e+=1;D<e;D++)m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+D).nodeValue,Z.Utils.stringValidate(m)?q[D]=d+"/"+m:(q[D]="null",r=!0);r&&Z.Utils.showMessage(Z.Utils.getResource("z279"));w=q;Z.ToolbarDisplay=Z.Utils.createContainerElement("div",
"ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");K=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);K.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,q[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);F=n;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(n=Z.Utils.cacheProofPath(Z.logoCustomPath),
n=new Z.Utils.Graphic("toolbarLogo",n,null,"1px","1px","1px","1px")):n=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,q[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(n.elmt),Z.ToolbarDisplay.appendChild(b)):(n.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),
Z.ToolbarDisplay.appendChild(n.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(n=new Z.Utils.Graphic("logoDivider",Z.skinPath,q[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(n.elmt));n=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(n);Z.Utils.addEventListener(n,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(n,"mouseover",
P.backgroundEventsHandler);Z.Utils.addEventListener(n,"touchstart",Z.Utils.preventDefault);b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,q[0],"1px","1px","0px","0px");n.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,q[9],q[10],q[11],"1px","1px","1px","1px","mouseover",t,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",
null,Z.skinPath,q[12],q[13],q[14],"1px","1px","1px","1px","mouseover",t,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,q[1],q[2],q[3],"1px","1px","1px","1px","mouseover",t,"z400");n.appendChild(b.elmt);Z.sliderZoomVisible&&(b=new Z.Utils.Graphic("trackSliderZoom",Z.skinPath,q[15],"1px","1px","0px","0px","z385"),n.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",t),Z.Utils.addEventListener(b.elmt,"touchstart",t),Z.Utils.addEventListener(b.elmt,
"mouseover",t),b=new Z.Utils.Button("buttonSliderZoom",null,Z.skinPath,q[17],q[18],q[19],"1px","1px","1px","1px","mouseover",t,"z385"),n.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,q[4],q[5],q[6],"1px","1px","1px","1px","mouseover",t,"z399");n.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,q[20],"1px","1px","1px","1px"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,q[21],q[22],q[23],"1px","1px","1px",
"1px","mouseover",t,"z370"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",null,Z.skinPath,q[24],q[25],q[26],"1px","1px","1px","1px","mouseover",t,"z372"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,q[27],q[28],q[29],"1px","1px","1px","1px","mouseover",t,"z369"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,q[30],q[31],q[32],"1px","1px","1px","1px","mouseover",t,"z371"),n.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",
null,Z.skinPath,q[33],q[34],q[35],"1px","1px","1px","1px","mouseover",t,"z378"),n.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,q[36],"1px","1px","1px","1px"),n.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,q[40],q[41],q[42],"1px","1px","1px","1px","mouseover",t,"z391EXIT"),n.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,q[37],q[38],q[39],"1px","1px",
"1px","1px","mouseover",t,"z391"),n.appendChild(b.elmt);if(1==Z.helpVisible||3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,q[43],q[44],q[45],"1px","1px","1px","1px","mouseover",t,"z342"),n.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),d=F[16],n.appendChild(b),n=document.createTextNode(Z.Utils.getResource("z183")),
b.appendChild(Z.Utils.createCenteredElement(n,"progressTextBoxCenteredDiv")),null===J&&(J=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(n,J,"verdana",d+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(n));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=F[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=G=F[1];P.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-G:0);a&&a.getStatus("initialized")&&
(1==Z.toolbarVisible&&(a.setSizeAndPosition(Z.viewerW,Z.viewerH-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),n=a.getZoom(),h(n),a.setDrawingColor("buttonColor0"+U,!0));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);ca||(ca=!0,Z.Utils.validateCallback("toolbarInitialized"),Z.Viewer.validateViewerReady("toolbarInitialized"))}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};
this.setSizeAndPosition=function(a,b,c,d){"undefined"===typeof a||null===a?a=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=a;if("undefined"===typeof b||null===b)b=0<Z.toolbarVisible?G:0;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=1==Z.toolbarPosition?Z.viewerH-G:0;K=Z.ToolbarDisplay.style;K.width=a+"px";K.height=b+"px";K.left=c+"px";K.top=d+"px";var e=F[2],h=F[3],q=F[4],w=F[5],p=F[6],m=F[7],da=F[8],y=F[9],t=F[10],D=F[11],r=F[12],ka=F[13];c=F[14];d=F[15];
var u=0,x=(b-h)/2+1,v=(b-w)/2,O=(b-m)/2,B=1.3*O,C=O+4,M=O+2,P=1==Z.logoVisible?0:da/2,Q=1==Z.logoVisible?0:da/2,ba=da-(p-q),l=2,H=0;Z.panButtonsVisible&&(l+=4,H+=1);Z.resetVisible&&(l+=1);if(Z.fullScreenVisible||Z.fullPageVisible)l+=1,H+=1;Z.helpVisible&&(l+=1,Z.fullScreenVisible||Z.fullPageVisible||(H+=1));H=l*da+H*ba;Z.sliderZoomVisible&&(H+=ka);Wa=Da=fa=la=!1;var l=(1==Z.logoVisible?e+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?da:0),J=1==Z.panButtonsVisible?4*da+ba:0,
ca=1==Z.resetVisible?da:0,U=l+20+H+20+c;U>a&&(Wa=!0,U-ka>a&&(Da=!0,U-ka-c>a&&(fa=!0,U-ka-c-l>a&&(E=!0,U-ka-c-l-ca>a&&(la=!0,H-=J),H-=ca)),c=0),H-=ka);J=(a-H)/2-20+3;if(l=document.getElementById("toolbarBackground"))l.style.width=a+"px",l.style.height=b+"px",l.firstChild.style.width=a+"px",l.firstChild.style.height=b+"px";if(l=document.getElementById("buttonContainer"))l.style.width=H+40+"px",l.style.height=b+"px",l.style.left=J+"px";if(H=document.getElementById("buttonBackground"))H.style.width=a+
"px",Z.Utils.graphicSize(H,parseFloat(l.style.width),parseFloat(l.style.height)),H.style.left="0px";if(H=document.getElementById("toolbarLogo"))if(J=H.style)if(fa)J.display="none";else if(J.display="inline-block",Z.Utils.graphicSize(H,e,h),J.left=u+"px",J.top=x+"px",u+=e+2,e=document.getElementById("logoDivider"))Z.Utils.graphicSize(e,q,w),e=e.style,e.left=u+"px",e.top=v+"px";0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&(e=document.getElementById("buttonMinimize"),h=document.getElementById("buttonExpand"),
e&&h&&(x=e.style,H=h.style,x&&H&&(fa?(x.display="none",H.display="none"):(x.display="inline-block",H.display="inline-block",Z.Utils.buttonSize(e,p,m),Z.Utils.buttonSize(h,p,m),x.left=u+P+"px",x.top=B+"px",H.left=u+Q+"px",H.top=B+"px"))));u=20;if(B=document.getElementById("buttonZoomOut"))Z.Utils.buttonSize(B,p,m),B=B.style,B.left=u+"px",B.top=O+"px",u+=da;trsZ=document.getElementById("trackSliderZoom");btsZ=document.getElementById("buttonSliderZoom");trsZ&&btsZ&&(trszS=trsZ.style,btszS=btsZ.style,
trszS&&btszS&&(Wa?(trszS.display="none",btszS.display="none"):(trszS.display="inline-block",btszS.display="inline-block",Z.Utils.graphicSize(trsZ,D,r),trszS.left=u-2+"px",trszS.top=C+"px",Z.Utils.buttonSize(btsZ,y,t),btszS.left=parseFloat(trszS.left)+"px",btszS.top=M+"px",u+=ka)));if(y=document.getElementById("buttonZoomIn"))Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da+1;if(!la&&(y=document.getElementById("panDivider"))){Z.Utils.graphicSize(y,q,w);y=y.style;y.left=u+"px";y.top=
v+"px";u+=ba;if(y=document.getElementById("buttonPanLeft"))Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da;if(y=document.getElementById("buttonPanUp"))Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da;if(y=document.getElementById("buttonPanDown"))Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da;if(y=document.getElementById("buttonPanRight"))Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da}!E&&(y=document.getElementById("buttonReset"))&&
(Z.Utils.buttonSize(y,p,m),y=y.style,y.left=u+"px",y.top=O+"px",u+=da+1);if(y=document.getElementById("fullViewDivider"))Z.Utils.graphicSize(y,q,w),q=y.style,q.left=u+"px",q.top=v+"px",u+=ba;if(v=document.getElementById("buttonFullViewExit"))Z.Utils.buttonSize(v,p,m),v=v.style,v.left=u+"px",v.top=O+"px",v.display=Z.fullView?"inline-block":"none";if(v=document.getElementById("buttonFullView"))Z.Utils.buttonSize(v,p,m),v=v.style,v.left=u+"px",v.top=O+"px",u+=da+1,v.display=Z.fullView?"none":"inline-block";
if(1==Z.helpVisible||3==Z.helpVisible)if(da=document.getElementById("buttonHelp"))Z.Utils.buttonSize(da,p,m),p=da.style,p.left=u+"px",p.top=O+"px";if(u=document.getElementById("progressTextBox"))if(u=u.style)Da?u.display="none":(u.display="inline-block",u.width=c+"px",u.height=d+"px",u.left=a-parseFloat(l.style.left)-parseFloat(u.width)+"px",u.top=(b-parseFloat(u.height))/2+"px")};this.syncSliderToViewportZoom=function(a){h(a)};this.z457=function(a){t(a)};this.backgroundEventsHandler=function(a){a=
Z.Utils.event(a);if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(D||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}}};
Z.ZoomifyNavigator=function(a){function b(c,d){var e="undefined"!==typeof d&&null!==d?!1:!0,h=e?a:d;"unconverted"!=Z.tileSource?("ZoomifyImageFile"==Z.tileSource?Za=h.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource&&(Za=Z.Utils.cacheProofPath(h.getImagePath()+"/TileGroup0/0-0-0."+Z.tileType)),g=null,g=new Image,g.onload=c,g.onerror=ca,"offsetLoading"!=Za?(e||(pa[pa.length]={id:d.getViewportID().toString(),image:g}),"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(Za,Z.Utils.createCallback(null,
c),"navigator",null):g.src=Za):window.setTimeout(function(){b(c)},100)):"undefined"!==typeof unconvertedImage&&null!==unconvertedImage?(g=h.createUnconvertedImageThumbnail(unconvertedImage),e&&"function"===typeof c?c():pa[pa.length]="undefined"!==typeof d?{id:d.getViewportID().toString(),image:g}:{id:null,image:null}):window.setTimeout(function(){b(c,d)},100)}function c(a,b){"ZoomifyImageFile"==Z.tileSource&&(g=b);var d=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute",
"hidden",X+"px",n+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(g);d.removeChild(g);d=null;d=g.height;if(0!=g.width&&0!=d){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",X+"px",n+"px",ua+"px",ra+"px","solid","1px","transparent none","0px","0px","normal",null,!0);B=Z.NavigatorDisplay;J=B.style;Z.slideshow&&Z.Utils.setOpacity(B,0);d=parseInt(Z.Utils.getResource("z230"),10);J.zIndex=(d+2).toString();
var d=parseFloat(Z.Utils.getResource("z82")),e=Z.Utils.getResource("z83"),m=Z.Utils.getResource("z83NOALPHA"),e=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",X+"px",n+"px","0px","0px","none","0px",e,"0px","0px","normal",null,!0);Z.Utils.setOpacity(e,d,m);Z.NavigatorDisplay.appendChild(e);Wa=e;Da=Wa.style;d=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",X+"px",n+"px","0px","0px","none","0px","transparent none",
"0px","0px","normal",null,!0);d.appendChild(g);g.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(d);fa=d;la=fa.style;E=g;d=E.width;m=E.height;e=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",X+1+"px",n+1+"px",ua+"px",ra+"px","solid","1px","transparent none","0px","0px","normal",null,!0);e.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Z.NavigatorDisplay.appendChild(e);M=e;x=M.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);
h(X,n,ua,ra,La,d,m);t(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(B,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(B,"mousedown",U);Z.Utils.addEventListener(B,"touchstart",w);Z.Utils.addEventListener(B,"touchmove",q);Z.Utils.addEventListener(B,"touchend",F);Z.Utils.addEventListener(B,"touchcancel",ka);D||(D=!0,Z.Utils.validateCallback("navigatorInitialized"),Z.Viewer.validateViewerReady("navigatorInitialized"));C()}else window.setTimeout(function(){c(a,b)},
100)}function d(a){if(Z.NavigatorDisplay)if(Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(g=a),fa&&g&&0<g.width&&0<g.height){a=g.width;var b=g.height;fa.appendChild(g);E=Z.NavigatorDisplay.childNodes[1].firstChild;h(X,n,ua,ra,La,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;t((1==Z.navigatorVisible||2==Z.navigatorVisible)&&
a);a=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(a+2).toString();C()}else window.setTimeout(function(){d()},100)}function e(){D&&(O&&(window.clearInterval(O),O=null),B&&J&&Wa&&Da&&fa&&la&&E&&M&&x||(B=Z.NavigatorDisplay,J=B.style,Wa=Z.NavigatorDisplay.firstChild,Da=Wa.style,fa=Z.NavigatorDisplay.childNodes[1],la=fa.style,E=Z.NavigatorDisplay.childNodes[1].firstChild,M=Z.NavigatorDisplay.childNodes[2],x=M.style))}function h(a,b,c,d,e,g,h){e||(e=La);if("undefined"===typeof a||
null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=0;B||(B=Z.NavigatorDisplay);J||(J=B.style);E=B.childNodes[1].firstChild;0==E.width&&"undefined"!==g&&null!==g&&(E.width=g);0==E.height&&"undefined"!==h&&null!==h&&(E.height=h);B&&J&&E&&(e&&(a=1,a=0==e?Z.viewerW/Z.viewerH:E.width/E.height,a*=b),J.width=a+"px",J.height=b+"px",J.left=c+"px",J.top=d+"px",m(a,b))}function m(a,b){E||(E=Z.NavigatorDisplay.childNodes[1].firstChild);
E&&0!=E.width&&0!=E.height?(Da||(Da=Z.NavigatorDisplay.firstChild.style),la||(la=Z.NavigatorDisplay.childNodes[1].style),Da&&la&&(Da.width=a+"px",Da.height=b+"px",r(a,b),la.width=E.width+"px",la.height=E.height+"px",la.left=(a-E.width)/2+"px",la.top=(b-E.height)/2+"px",C())):window.setTimeout(function(){m(a,b)},100)}function r(a,b){E||(E=Z.NavigatorDisplay.childNodes[1].firstChild);if(E){var c=E.width,d=E.height,e=c/d,g=a/c,h=b/d;g<=h?(c=a,d=a/e,navImageT=(b-a/c*d)/2):h<g&&(d=b,c=b*e,navImageL=(a-
b/d*c)/2);E.width=c;E.height=d}}function t(a){J||(J=Z.NavigatorDisplay.style);J&&(J.display=a?"inline-block":"none")}function C(){if(a&&a.getStatus("initialized")){Q();var b=a.calculateCurrentCenterCoordinates();v(b)}}function Q(){if(E&&x){var b=E.width/Z.imageW,c=E.height/Z.imageH,d=a.getZoom(),c=Z.viewerH*c/d;x.width=Z.viewerW*b/d+"px";x.height=c+"px"}}function v(a){if(E&&x&&la){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||
null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(E.width),d=parseFloat(E.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,d/Z.imageH*a.y-d/2,-b);a=b.x-parseFloat(x.width)/2;c=b.y-parseFloat(x.height)/2;b=parseFloat(J.width)/2;c=parseFloat(J.height)/2+c-1;x.left=b+a+"px";x.top=c+"px"}}function P(){if(E&&x&&la){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(x.left),d=parseFloat(x.top),e=parseFloat(J.width)/2,g=parseFloat(J.height)/2,d=d-
g,c=c-e+parseFloat(x.width)/2,e=d+parseFloat(x.height)/2,b=Z.Utils.rotatePoint(c,e,b),c=parseFloat(E.width),e=parseFloat(E.height),d=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/d,(b.y+e/2)/d);a.syncViewportToNavigator(b)}}function ca(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function U(b){Z.interactivityOff||(a.zoomAndPanAllStop(!1,!0),B&&M&&x&&(b=Z.Utils.event(b),M.mouseXPrior=b.clientX,M.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(B,"mousemove",
G),Z.Utils.addEventListener(B,"mouseup",K),Z.Utils.addEventListener(document,"mouseup",K)))}function G(a){if(!Z.interactivityOff&&M&&x){var b=parseFloat(x.left),c=parseFloat(x.top);x.left=b+(a.clientX-M.mouseXPrior)+"px";x.top=c+(a.clientY-M.mouseYPrior)+"px";M.mouseXPrior=a.clientX;M.mouseYPrior=a.clientY;P();return!1}}function K(b){if(!Z.interactivityOff&&B&&M&&x){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(B,"mousemove",G);Z.Utils.removeEventListener(B,"mouseup",K);
Z.Utils.removeEventListener(document,"mouseup",K);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),x.left=b.clientX-c.x-parseFloat(x.width)/2+"px",x.top=b.clientY-c.y-parseFloat(x.height)/2+"px");P();a.updateView()}}function w(a){!Z.interactivityOff&&(a.preventDefault(),B&&M&&x&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,
a.y),M.mouseXPrior=a.x,M.mouseYPrior=a.y)}function q(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(M&&x&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(x.left),c=parseFloat(x.top);x.left=b+(a.x-M.mouseXPrior)+"px";x.top=c+(a.y-M.mouseYPrior)+"px";M.mouseXPrior=a.x;M.mouseYPrior=a.y;P()}return!1}}function F(b){if(!Z.interactivityOff&&B&&M&&x){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,
dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),x.left=b.x-c.x-parseFloat(x.width)/2+"px",x.top=b.y-c.y-parseFloat(x.height)/2+"px")}P();a.updateView()}}function ka(b){if(!Z.interactivityOff&&B&&M&&x){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),x.left=b.x-
c.x-parseFloat(x.width)/2+"px",x.top=b.y-c.y-parseFloat(x.height)/2+"px")}P();a.updateView()}}var D=!1,ba=a.getViewportID().toString(),O,B,J,Wa,Da,fa,la,E,M,x,g,pa=[],X=Z.navigatorW,n=Z.navigatorH,ua=Z.navigatorL,ra=Z.navigatorT,La=Z.navigatorFit,Za;b(c);this.z556=function(a,b){c(a,b)};this.setImage=function(a){fa&&g&&0<fa.childNodes.length&&(fa.innerHTML="");"undefined"===typeof pa||null===pa||0==pa.length?b(d):(a=Z.Utils.arrayIndexOfObjectValue(pa,"id",ba),-1!=a&&(g=pa[a].image,d(g)))};this.getInitialized=
function(){return D};this.setVisibility=function(a){t(a)};this.syncToViewport=function(){C()};this.z657=function(){Q()};this.z658=function(a){v(a)};this.z682=function(){D?e():O=window.setInterval(e,300)};this.setSizeAndPosition=function(a,b,c,d,e,g,q){h(a,b,c,d,e,g,q)}};
Z.NetConnector=function(){function a(a,c,d){var h=a.substring(0,a.indexOf("?")),m=parseFloat(a.substring(a.indexOf("?")+1,a.indexOf(",")));a=parseFloat(a.substring(a.indexOf(",")+1,a.length));m=new Z.Utils.Range(m,m+a);b(h,e,m,c,d)}function b(a,b,e,h,m,t){var r=c();if(r){var v="function"===typeof b;if(v){var C=b;b=function(){window.setTimeout(Z.Utils.createCallback(null,C,r),1)};r.onreadystatechange=function(){4==r.readyState&&(r.onreadystatechange=new Function,b())}}try{"undefined"===typeof e||null===
e?(r.open("GET",a,v),r.send(null)):"undefined"!==typeof h&&null!==h&&"ZoomifyImageFile"==Z.tileSource&&("tile"!=h&&(a=Z.Utils.cacheProofPath(a)),r.open("GET",a,!0),r.responseType="arraybuffer",Z.Utils.defineObjectProperty(r,"zType",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zTile",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(r,"zChunkNumber",{value:t,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&
r.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),r.setRequestHeader("Range","bytes="+e.start.toString()+"-"+e.end.toString()),r.send(null))}catch(G){d(G,a,h),r=null,console.log(G)}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}function c(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");
break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function d(a,b,c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+
c+".",!1,Q,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,Q,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,C,"center")}function e(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=
a.status,d=404==c?"Not Found":a.statusText;Z.Toolbar&&!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+c+" - "+d,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+c+" - "+d,!1,C,"center")}else if(c=null,c=null!==Z.annotationPath&&".json"==Z.annotationPath.toLowerCase().substring(Z.annotationPath.length-5,Z.annotationPath.length),a.response&&
a.zType&&"ZoomifyImageFile"==Z.tileSource){if(Z.Viewport)if(c=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFHeader(c);else for(var d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFHeader(c);else if("offset"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFOffsetChunk(c,a.zChunkNumber);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFOffsetChunk(c,a.zChunkNumber);
else if("byteCount"==a.zType)if("undefined"===typeof b||null===b)Z.Viewport.parseZIFByteCountChunk(c,a.zChunkNumber);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFByteCountChunk(c,a.zChunkNumber);else if("image"==a.zType.substring(0,5))v--,Z.Viewport.parseZIFImage(c,a.zTile,a.zType);else if("navigator"==a.zType)if("undefined"===typeof b||null===b)Z.viewportCurrent.parseZIFImage(c,a.zTile,a.zType);else for(d=0,e=Z.imageSetLength;d<e;d++)b==d&&Z["Viewport"+d.toString()].parseZIFImage(c,
a.zTile,a.zType);else Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,Q,"center")}else a.responseXML&&a.responseXML.documentElement&&!c?(c=a.responseXML,h(c,b)):a.responseText&&(c=a.responseText,"ZoomifyImageFolder"==Z.tileSource?(c=Z.Utils.xmlConvertTextToDoc(c),h(c,b)):"ZoomifyImageFile"==Z.tileSource&&(c=Z.Utils.xmlConvertTextToDoc(c),h(c,b)));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,C,"center")}function h(a,b){if(a&&a.documentElement){var c=a.documentElement.tagName;
"IMAGE_PROPERTIES"==c||"ZIFHEADER"==c?("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource)&&Z.Viewport&&Z.Viewport.z602(a):"SKINDATA"==c?Z.Toolbar&&Z.Toolbar.parseSkinXML(a):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)}else Z.Utils.showMessage(Z.Utils.getResource("z293"),!0)}function m(b,c,d,e){if(v<P)return v++,"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof e&&null!==e||"navigator"==d)?a(b,d,e):(c=Z.Utils.createCallback(null,r,c),(new t(b,c,d)).start()),!0;-1==Z.Utils.arrayIndexOfObjectValue(K,
"sc",b)&&(K[K.length]={sc:b,cb:c,ct:d,t:e},G||(G=window.setInterval(function(){var a=K[0];m(a.sc,a.cb,a.ct,a.t)&&(K=Z.Utils.arraySplice(K,0,1));0==K.length&&G&&(window.clearInterval(G),G=null)},U)));return!1}function r(a,b,c){v--;if("function"===typeof a)try{a(c)}catch(d){Z.Utils.showMessage(d.name+Z.Utils.getResource("z245")+b+" "+d.message,!0)}}function t(a,b,c){function d(c){e.onload=null;e.onabort=null;e.onerror=null;h&&window.clearTimeout(h);window.setTimeout(function(){b(a,c?e:null)},1)}var e=
null,h=null;this.start=function(){e=new Image;var b=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=b;e.onerror=b;h=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));d(!1);Z.Viewport.traceDebugValues("imageRequestTimeout",c+" timeout: "+a)},ca);e.src=a}}var C=parseInt(Z.Utils.getResource("z268"),10),Q=parseInt(Z.Utils.getResource("z268MEDIUM"),10),v=0,P=parseInt(Z.Utils.getResource("z140"),10),ca=parseFloat(Z.Utils.getResource("z139")),U=Z.Utils.getResource("DEFAULT_IMAGELOADQUEUEDELAY"),
G,K=[];this.loadXML=function(a,c){"undefined"===typeof c||null===c?b(a,e,null):b(a,function(a){e(a,c)},null)};this.loadByteRange=function(a,c,d,h,m,r){c=new Z.Utils.Range(c,d);b(a,e,c,h,m,r)};this.loadImage=function(a,b,c,d){m(a,b,c,d)}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
e="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[e]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=e;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,e=a._listeners[c];a.detachEvent("on"+b,d._allListeners[e].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[e]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var e=
d.length-1;0<=e;e--){var h=a._allListeners[d[e]];if(h&&h.eventName==b&&h.handler==c)return e}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.cacheProofCounter=0;Z.timerCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=
null;Z.scaleThreshold=null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=
null;Z.zifSupported=null;Z.onReady=null;Z.onAnnotationReady=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.autoResize=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;
Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.panBuffer=null;Z.constrainPanStrict=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.watermarkPath=null;Z.copyrightPath=null;Z.hotspots=!1;Z.hotspotPath=null;Z.hotspotFolder=null;Z.hotspotListTitle=
null;Z.hotspotsDrawOnlyInView=!0;Z.captionBoxes=!1;Z.screensaver=!1;Z.screensaverSpeed=null;Z.tour=!1;Z.tourPath=null;Z.tourListTitle=null;Z.tourPlaying=null;Z.tourStop=!1;Z.slideshow=!1;Z.slidePath=null;Z.slideListTitle=null;Z.slideshowPlaying=null;Z.slideTransitionTimeout=null;Z.slideTransitionSpeed=null;Z.slideOpacity=0;Z.audioContent=!1;Z.audioMuted=!1;Z.annotations=!1;Z.annotationPath=null;Z.annotationPanelVisible=null;Z.annotationPanelVisibleState=!1;Z.annotationFolder=null;Z.annotationXMLText=
null;Z.annotationJSONObject=null;Z.annotationsAddMultiple=null;Z.annotationsAutoSave=null;Z.saveButtonVisible=null;Z.labelClickSelect=null;Z.simplePath=!1;Z.noPost=!1;Z.noPostDefaults=!1;Z.unsavedEditsTest=!0;Z.maskVisible=null;Z.maskingSelection=!1;Z.maskFadeTimeout=null;Z.maskFadeSpeed=null;Z.maskOpacity=0;Z.maskClearOnUserAction=null;Z.externalEditPermissionFunction=null;Z.annotationSort="none";Z.saveHandlerPath=null;Z.saveImageHandlerPath=null;Z.saveImageFull=null;Z.postingXML=!1;Z.postingImage=
!1;Z.minimizeVisible=null;Z.sliderZoomVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;Z.measureVisible=!1;Z.captionTextColor=null;Z.captionBackColor=null;Z.polygonLineColor=null;Z.polygonFillColor=null;Z.captionTextVisible=!0;Z.captionBackVisible=!0;Z.polygonFillVisible=!0;Z.polygonLineVisible=!0;Z.rotationVisible=null;Z.initialR=null;Z.initialRotation=
null;Z.virtualPointerVisible=null;Z.crosshairsVisible=null;Z.rulerVisible=null;Z.units=null;Z.unitsPerImage=null;Z.pixelsPerUnit=null;Z.sourceMagnification=null;Z.magnification=null;Z.rulerListType=null;Z.rulerW=null;Z.rulerWidth=null;Z.rulerH=null;Z.rulerHeight=null;Z.rulerL=null;Z.rulerLeft=null;Z.rulerT=null;Z.rulerTop=null;Z.coordinatesVisible=null;Z.saveImageFull=null;Z.saveImageFilename=null;Z.saveImageFormat=null;Z.saveImageCompression=null;Z.saveImageBackColor=null;Z.imageFiltersVisible=null;
Z.initialImageFilters=null;Z.progressVisible=null;Z.messagesVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.serverIP=null;Z.serverPort=null;Z.tileHandlerPath=null;Z.tileHandlerPathFull=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.freehandVisible=null;Z.textVisible=null;Z.iconVisible=null;Z.rectangleVisible=null;Z.polygonVisible=null;Z.annotationPathProvided=!1;Z.saveHandlerProvided=!1;
Z.imageSetPathProvided=!1;Z.saveImageHandlerProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.focal=null;Z.quality=null;Z.markupMode=null;Z.editMode=null;Z.editing=null;Z.labelMode="view";Z.editModePrior=Z.editMode;Z.sliderFocus="zoom";Z.animation=!1;Z.animationPath=null;Z.animationCount=0;Z.animationAxis=null;Z.animator=null;Z.slidestack=!1;Z.slidestackPath=null;Z.imageSet=!1;Z.imageSetPath=null;Z.imageSetLength=null;Z.imageSetListPosition=null;Z.imageSetListTitle=null;Z.imageSetStart=null;
Z.imageSetLoop=null;Z.sliderImageSetVisible=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageSetHotspotPath=null;Z.hotspotFileShared=!1;Z.imageSetAnnotationPath=null;Z.annotationFileShared=!1;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.CoordinatesDisplay=null;Z.coordinates=
null;Z.coordinatesSave=null;Z.CopyrightDisplay=null;Z.AnnotationPanelDisplay=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.TraceDisplay=null;Z.traces=
null;Z.mouseIsDown=!1;Z.buttonIsDown=!1;Z.keyIsDown=!1;Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteDuration=null;Z.mouseWheelCompleteTimer=null;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null;Z.viewportChangeTimeout=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,e=navigator.appVersion,h=!1,m=!1,r=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&
window.ActiveXObject)b=r.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(r.substring(b+5,r.indexOf(";",b))),h="undefined"!==typeof document.documentMode;else if("Netscape"==d&&-1!=r.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var t=r.indexOf("firefox"),d=r.indexOf("safari"),e=r.indexOf("chrome");0<=t?(a=Z.browsers.FIREFOX,b=parseFloat(r.substring(t+8)),c=1E4):0<=d&&(c=r.substring(0,d).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(r.substring(c+
1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(m=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var C;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,C="XMLHttpRequest";else if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,t=d.length;e<t;e++)try{netReq=new ActiveXObject(d[e]);C=d[e];break}catch(Q){}var d="response"in
XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),t=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&t,t=!(a==Z.browsers.CHROME&&2>b),m=h||m?"high":null,v=(document.documentElement||{}).style||{},h=!1,P=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],ca,U;for(;ca=P.shift();)if("undefined"!==
typeof v[ca]){h=!0;U=/webkit/i.test(ca);break}v=h;P=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)P=!0;var G=Array.prototype.map,K=Array.prototype.splice,w=!1;try{new Float32Array(1),w=!0}catch(q){}var F=!1;try{new Uint8Array(1),F=!0}catch(ka){}var D=
!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),D=!0}catch(ba){}var O="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,r=-1<r.indexOf("android")||-1<r.indexOf("iphone")||-1<r.indexOf("ipad")||-1<r.indexOf("ipod"),B;switch(window.location.protocol){case "http:":B=!1;break;case "https:":B=!1;break;case "file:":B=!0;break;default:B=null}var J=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||
Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=C;Z.responseArraySupported=d;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=h;Z.cssTransformProperty=ca;Z.cssTransformNoUnits=
U;Z.alphaSupported=t;Z.renderQuality=m;Z.rotationSupported=v;Z.fullScreenSupported=P;Z.arrayMapSupported=G;Z.arraySpliceSupported=K;Z.float32ArraySupported=w;Z.uInt8ArraySupported=F;Z.definePropertySupported=D;Z.touchSupport=O;Z.mobileDevice=r;Z.localUse=B;Z.zifSupported=J},parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,d=a.length;c<d;c++){var e=a[c],h=e.indexOf("=");if(0<h){var m=e.substring(0,h),e=e.substring(h+1);b[m]=e}}}return b},
parametersToDelimitedString:function(a,b){var c="",d;for(d in a)c+=d+"="+a[d].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=this.getResource("z287"),c=this.getResource("z110"),d=this.getResource("z109"),e=this.getResource("z108"),c=c!=d?!0:!1;c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var h=this.getResource("z187"),m=this.getResource("z186"),d=this.getResource("z185"),h=h!=m?!0:!1,r=this.getResource("z215"),m=this.getResource("z214"),t=this.getResource("z213");Z.specialStorageEnabled=
r!=m?!0:!1;var C=this.getResource("z107"),Q=this.getResource("z106"),r=this.getResource("z105"),C=C!=Q?!0:!1;Z.skinPath=this.getResource("z201");Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||
(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),
10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");
Z.constrainPan="0"!=this.getResource("z95");Z.panBuffer=parseFloat(this.getResource("z173"));Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.smoothPan=Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=
parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderZoomVisible="0"!=this.getResource("DEFAULT_SLIDERZOOMVISIBLE");Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEEL"),10);Z.panButtonsVisible=
"0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.fullViewVisible="0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.measureVisible="0"!=this.getResource("z157");Z.rotationVisible="0"!=
this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");if("object"===typeof a&&null!==a)for(var v in a)if("function"!==typeof a[v]||"zOnAnnotationReady"===v||"zOnReady"===v)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(v.substr(1))])alert(b+" "+v);else if(pValue=a[v],c||"zNavigatorVisible"==v)switch(v){case "zOnAnnotationReady":"function"===typeof pValue&&Z.setCallback("annotationPanelInitialized",pValue);break;case "zOnReady":"function"===typeof pValue&&Z.setCallback("readyViewer",
pValue);break;case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==pValue&&(pValue="-1");"fill"==pValue&&(pValue="0");isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),
Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==
pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==pValue&&(Z.sliderZoomVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&
(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zSkinPath":Z.skinPath=
pValue;break;default:if(h)switch(v){default:if(C)switch(v){default:Z.specialStorageEnabled==m&&alert(t+" "+v)}else alert(r+" "+v)}else alert(d+" "+v)}else alert(e+" "+v);if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath)||Z.Utils.stringValidate(Z.saveImageHandlerPath))C?Z.Utils.stringValidate(Z.saveHandlerPath)&&(a=Z.saveImageHandlerPath,Z.saveHandlerPath=Z.saveHandlerPath,Z.saveImageHandlerPath=a):(Z.annotationPath="",alert(r));Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||
(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));if(this.stringValidate(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.indexOf("=");
if(0<e){var h=d.substring(0,e),d=d.substring(e+1);if(this.stringValidate(d))switch(h){case "zInitialX":isNaN(parseFloat(d))||(Z.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(Z.initialY=parseFloat(d));break;case "zInitialZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(Z.initialZ=parseFloat(d),Z.initialZ&&0<Z.initialZ&&100>=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":"fit"==d&&(d="-1");"fill"==d&&(d="0");isNaN(parseFloat(d))||(Z.minZ=parseFloat(d),
Z.minZ&&0<Z.minZ&&100>=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(Z.maxZ=parseFloat(d),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(a){a="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath;if(null!==a)this.getResource("z213"),-1!=a.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):-1!=a.toLowerCase().indexOf(".jpg")||-1!=a.toLowerCase().indexOf(".png")?
Z.tileSource="unconverted":Z.Utils.stringValidate(Z.tileHandlerPath)||(Z.tileSource="ZoomifyImageFolder");else if(Z.imageSet||Z.slideshow)Z.tileSourceMultiple=!0},clearImageParameters:function(){Z.imagePath=null;Z.parameters=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.initialR=null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.annotationPathProvided=!1;Z.imageSetPathProvided=!1;Z.tileSource=null;Z.tileSourceMultiple=null;Z.imageW=null;Z.imageH=
null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.fullViewPrior=!1},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";
break;case "z187":b="Changing This Violates License Agreement";break;case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z90":b="1024";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "DEFAULT_IMAGELOADQUEUEDELAY":b="100";
break;case "z218":b="1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z173UNCONVERTED":b=Z.mobileDevice?Z.rotationVisible?"2":"1":"10";break;case "DEFAULT_z310SIZEMAXBROWSER":b="10000";break;case "DEFAULT_z310SIZEMAXFIREFOX":b="4000";break;case "DEFAULT_z310SIZEMAXIMAGESET":b=
"1000";break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":b="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":b="1000";break;case "z104":b="0";break;case "z175":b="5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "DEFAULT_AUTORESIZESKIPDURATION":b=
"10";break;case "DEFAULT_MOUSEWHEEL":b="1";break;case "DEFAULT_MOUSEWHEELANIMATION":b="1";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="250";break;case "z95":b="1";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b="1";break;case "DEFAULT_SMOOTHPANEASING":b="2";break;case "DEFAULT_SMOOTHPANGLIDE":b=
"2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b=
"-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b="1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "DEFAULT_SLIDERZOOMVISIBLE":b="1";break;case "z205ZOOM":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b="1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b=
"0";break;case "z232":b="Assets/VirtualPointer/virtualPointer.png";break;case "z157":b="undefined"===typeof Z.parameters||null===Z.parameters||"undefined"!==typeof Z.parameters.zMeasureVisible&&"0"==Z.parameters.zMeasureVisible||!("undefined"!==typeof Z.parameters.zMarkupMode&&"1"==Z.parameters.zMarkupMode||"undefined"!==typeof Z.parameters.zEditMode&&"1"==Z.parameters.zEditMode)?"0":"1";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";break;case "z190":b="0";break;case "DEFAULT_INITIALR":b=
"0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":b="\nClick the '?' button for help.";break;case "ERROR_ERROR":b="error";break;case "z268LONG":b=
"9000";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";
break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "ERROR_VALIDATEVIEW":b="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";
break;case "z280-ZIF":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";
break;case "z256-TOOLBARSKINSXML":b="Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";break;case "z256":b="Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";
break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b=
"Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";break;case "ERROR_UNCONVERTEDIMAGEPATHINVALID":b="Unconverted JPEG or PNG image failed to load: possible invalid path, missing image, or network error.";
break;case "ERROR_TRANSLATINGCANVASFORUNCONVERTEDIMAGE":b="\nTranslation of canvas failed";break;case "ERROR_SCALINGCANVASFORUNCONVERTEDIMAGE":b="\nScaling of canvas failed";break;case "ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE":b="\nTransform on canvas failed";break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;
case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z360":b="Launch Zoomify Website";break;case "z363":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Minimize Toolbar"+a;break;
case "z341":a="";Z.hotspots?a="\nAlt-Click: Toggle Hotspot Visibility":Z.annotations&&(a="\nAlt-Click: Toggle Label Visibility");b="Expand Toolbar"+a;break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b="Exit Full View";
break;case "z391EXITEXTERNAL":b="Exit Full View";break;case "z342":b="Show Help";break;case "z342MARKUP":b="Show Markup Help";break;case "z342ANNOTATION":b="Show Annotation Help";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";break;case "z420":b=
"X";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, double-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();try{a.setTransform(1,0,0,1,0,0)}catch(b){Z.Utils.showMessage(Z.Utils.getResource("ERROR_SETTINGTRANSFORMONCANVASFORUNCONVERTEDIMAGE")),console.log("In function clearCanvas setting transform on canvas:  "+b)}a.clearRect(0,0,a.canvas.width,a.canvas.height);
a.restore()},createCallback:function(a,b){for(var c=[],d=2,e=arguments.length;d<e;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),e=0,r=arguments.length;e<r;e++)d[d.length]=arguments[e];return b.apply(a,d)}},validateCallback:function(a){var b=Z.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){Z.Utils.validateCallbackDelayed(a,b)},10)},validateCallbackDelayed:function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e&&e.callbackEvent==a&&"object"===typeof e&&"function"===
typeof e.callbackFunction)switch(a){case "viewZoomingGetCurrentZoom":var h=Z.Viewport.getZoom();e.callbackFunction(h);break;case "viewUpdateCompleteGetLabelIDs":h=Z.Viewport.getLabelIDsInCurrentView(!1,!0,!0);e.callbackFunction(h);break;case "viewUpdateCompleteGetLabelInternalIDs":h=Z.Viewport.getLabelIDsInCurrentView(!0,!0,!0);e.callbackFunction(h);break;default:e.callbackFunction()}}Z.Utils.arrayClear(b)},getContainerSize:function(a,b){var c=Z.Utils.getElementStyle(a),d=parseFloat(c.width),e=parseFloat(c.height);
Z.Utils.stringValidate(c.width)&&-1!=c.width.indexOf("%")&&(d=parseFloat(Z.Utils.getElementStyleProperty(a,"width")));Z.Utils.stringValidate(c.height)&&-1!=c.height.indexOf("%")&&(e=parseFloat(Z.Utils.getElementStyleProperty(a,"height")));isNaN(d)&&(d=b.clientWidth);isNaN(e)&&(e=b.clientHeight);if(0==d||0==e)winDimensions=Z.Utils.getWindowSize(),0==d&&(a.parentNode.style.width=winDimensions.x+"px",d=a.clientWidth),0==e&&(a.parentNode.style.height=winDimensions.y+"px",e=a.clientHeight);return new Z.Utils.Point(d,
e)},createContainerElement:function(a,b,c,d,e,h,m,r,t,C,Q,v,P,ca,U,G,K){var w=document.createElement(a);this.stringValidate(b)&&(w.id=b);b=w.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?d:"static";b.overflow=this.stringValidate(e)?e:"hidden";"canvas"==a?(this.stringValidate(h)&&w.setAttribute("width",h),this.stringValidate(m)&&w.setAttribute("height",m)):(this.stringValidate(h)&&(b.width=h),this.stringValidate(m)&&(b.height=m));this.stringValidate(r)&&
(b.left=r);this.stringValidate(t)&&(b.top=t);b.borderStyle=this.stringValidate(C)?C:"none";b.borderWidth=this.stringValidate(Q)?Q:"0px";b.borderColor="#696969";b.background=this.stringValidate(v)?v:"transparent none";b.margin=this.stringValidate(P)?P:"0px";b.padding=this.stringValidate(ca)?ca:"0px";b.whiteSpace=this.stringValidate(U)?U:"normal";this.stringValidate(G)&&(b.cursor=G);"undefined"!==K&&K&&(Z.Utils.addEventListener(w,"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(w,"mousedown",
Z.Utils.preventDefault),Z.Utils.addEventListener(w,"contextmenu",Z.Utils.preventDefault));return w},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';d[d.length]=
'<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,e=c.getElementsByTagName("div");0<e.length;)d=e[0],e=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,e,h,m,r,t,C,Q,v,P,ca,U,G,K,w){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,e,h,r,t,"white","0px",m,"normal");d=document.createElement("textarea");
c.appendChild(d);e=d.style;d.id=a;d.value=b;d.readOnly=C;e.width="100%";e.height="100%";e.margin="0";e.border="0";this.stringValidate(Q)&&(e.fontFamily=Q);this.stringValidate(v)&&(e.fontSize=v);this.stringValidate(P)&&(e.resize=P);this.stringValidate(ca)&&(d.columns=ca);this.stringValidate(U)&&(d.rows=U);this.stringValidate(G)&&(e.overflowX=G);this.stringValidate(K)&&(e.overflowY=K);this.stringValidate(w)&&(d.wrap=w,"off"==w&&(e.whiteSpace="nowrap"));return c},getChildElementByID:function(a,b){for(var c=
null,d=0,e=a.childNodes.length;d<e&&(c=a.childNodes[d],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);d++);return c},getElementPosition:function(a){for(var b=0,c=0,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);e;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=e,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},
getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},isElementFluid:function(a){var b,c,
d,e,h,m=a.cloneNode(!1);d=c=!1;window.getComputedStyle?value=window.getComputedStyle(m,null).width:m.currentStyle&&(value=m.currentStyle.width);"undefined"!==typeof value&&null!==value&&""!==value?c=-1!=value.toString().indexOf("%")||"auto"==value:(m.style.margin="0",m.style.padding="0",m.style.maxWidth="none",m.style.minWidth="none",b=document.createElement("testContainer"),b.style.display="block",b.style.width="800px",b.style.padding="0",b.style.margin="0",b.appendChild(m),a.parentNode.insertBefore(b,
a),c=m.offsetWidth,b.style.width="900px",m.offsetWidth==c?(a.parentNode.removeChild(b),c=!1):(e=Math.floor(.125*c),h=Math.floor(100/900*m.offsetWidth),a.parentNode.removeChild(b),c=e==h?!0:!1));0==d&&(window.getComputedStyle?value=window.getComputedStyle(m,null).height:m.currentStyle&&(value=m.currentStyle.height),"undefined"!==typeof value&&null!==value&&""!=value?d=-1!=value.toString().indexOf("%")||"auto"==value:(m.style.margin="0",m.style.padding="0",m.style.maxHeight="none",m.style.minHeight=
"none",b=document.createElement("testContainer"),b.style.display="block",b.style.height="800px",b.style.padding="0",b.style.margin="0",b.appendChild(m),a.parentNode.insertBefore(b,a),d=m.offsetHeight,b.style.height="900px",m.offsetHeight==d?(a.parentNode.removeChild(b),d=!1):(e=Math.floor(.125*d),h=Math.floor(100/900*m.offsetHeight),a.parentNode.removeChild(b),d=e==h?!0:!1)));return c||d},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=
null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));
return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,
b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,
b,c,d,e,h,m,r,t,C,Q,v,P,ca,U,G,K,w,q,F){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",m,r,t,C,ca,U,G,K,w,q,F);if(Z.Utils.stringValidate(b)){var ka=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(ka));Z.Utils.setTextNodeStyle(ka,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var D=Z.Utils.createGraphicElement(c+"/"+d),ba=Z.Utils.createGraphicElement(c+
"/"+e),O=Z.Utils.createGraphicElement(c+"/"+h);D.style.width=ba.style.width=O.style.width=m;D.style.height=ba.style.height=O.style.height=r;D.style.position=ba.style.position=O.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(D.style.top=ba.style.top=O.style.top="");ba.style.visibility=O.style.visibility="hidden";D.alt=ba.alt=O.alt="";"undefined"!==typeof P&&Z.Utils.stringValidate(P)&&(D.alt=Z.Utils.getResource(P));a.appendChild(D);a.appendChild(ba);a.appendChild(O)}Z.Utils.addEventListener(a,
"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(D,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ba,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(O,"contextmenu",Z.Utils.preventDefault));
Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(ka),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(P)&&(a.title=Z.Utils.getResource(P));Z.Utils.setButtonHandler(a,Q,v);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=
c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,
"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,
"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?
a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},Graphic:function(a,b,c,d,e,h,m,r){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=d;c.height=e;"undefined"!==typeof r&&Z.Utils.stringValidate(r)?b.alt=Z.Utils.getResource(r):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute",
"hidden",d,e,h,m,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=
c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},graphicSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?
b:0;this.z="number"===typeof c?c:0},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),d=a;do d+=d;while(0<--c);return d.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,
a.length-1):a},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setTextNodeStyle:function(a,b,c,d,e,h,m,r,t,C,Q,v){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=h;a.fontStretch=m;a.fontVariant=r;a.fontWeight=t;a.lineHeight=C;a.textAlign=Q;a.textDecoration=v},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||(a="#000000");0!=a.indexOf("#")&&
(a="#"+a);return a},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(d){this.showMessage(d.name+this.getResource("z244")+d.message)}else this.showMessage(this.getResource("z294"));return b},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayIndexOf:function(a,
b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var e=a.length;d<e;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,e,h){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var m=a.length;d<m;d++)if(a[d][b]===c&&a[d][e].toString()===h.toString())return d}return-1},arrayIndexOfObjectValueSubstring:function(a,
b,c,d,e){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var h=a.length;d<h;d++)if(e){if(-1!=a[d][b].toLowerCase().indexOf(c))return d}else if(-1!=a[d][b].indexOf(c))return d;return-1},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=3,e=arguments.length;d<e;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var h=[];if(3<arguments.length)for(d=3,e=arguments.length;d<e;d++)h[h.length]=arguments[d];for(var d=Z.Utils.arraySubarray(a,0,b),m=Z.Utils.arraySubarrayLen(a,
b,c),e=Z.Utils.arraySubarray(a,b+c),h=d.concat(h,e),d=a.length=0,e=h.length;d<e;d++)a[a.length]=h[d];a=m}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);
if(!c||c+b>a.length)c=a.length-b;for(var d=[],e=b;e<b+c;e++)d[d.length]=a[e];return d},arrayToArrayOfStrings:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},
calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},fullScreenView:function(a,b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),
Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",
Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var d=Math.PI/180*-c;c=a*Math.cos(d)-b*Math.sin(d);a=a*Math.sin(d)+b*Math.cos(d);return new Z.Utils.Point(c,
a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,d=parseFloat(a.height)/2,e=Z.Utils.rotatePoint,h=new Z.Utils.Point(0,0);0!=b&&(90==b?h=e(-c,d,-b):180==b?h=e(c,d,-b):270==b&&(h=e(c,-d,-b)),h.x+=c,h.y+=d);return new Z.Utils.Point(h.x,h.y)},intValue:function(a,
b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=
b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,d=a.length;c<d;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,d,e,h=0,m=0,r="",r=[];if(!a)return a;do b=a[h++],c=a[h++],d=a[h++],e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,r[m++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(h<a.length);r=r.join("");a=a.length%3;return(a?r.slice(0,a-3):r)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),
Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){d.onload=null;d.onabort=null;d.onerror=null;e&&window.clearTimeout(e);window.setTimeout(function(){b(d)},1)}var d=
new Image,e=null,h=parseFloat(this.getResource("z139")),m=function(){c(!1)};d.onload=function(){c(!0)};d.onabort=m;d.onerror=m;e=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));c(!1)},h);d.src=a},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,b,c,d){b-=a;return 1>(c/=d/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},
nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length,c=b-c,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getSign:function(a){return a?0>a?-1:1:0},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),10),d=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&
(c=Z.viewerW-a,a-=40);d>=Z.viewerH&&(d=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,e=Z.viewerH-d-b,h=this.getResource("z127"),b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",a+"px",e+"px","solid","1px",h,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px",
"20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),10);Z.HelpDisplay.style.zIndex=(a+9).toString();d=d-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||
Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display="inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,d=this.getResource("z159"),e=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block",
"absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");
e=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",e,"0px","0px");Z.MessageDisplay.appendChild(e.elmt)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,e){if(Z.messagesVisible){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);
var h=!0;e&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=
a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}}},getMessage:function(){var a="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},
hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()},uploadProgress:function(a){var b=Z.saveImageMessage;a.lengthComputable?(a=Math.round(100*a.loaded/a.total),b+=a.toString()+"%"):b+=Z.Utils.getResource("ALERT_IMAGESAVEUNABLETOCOMPUTEPROGRESS");Z.Utils.showMessage(b,!1,"none","center")}};